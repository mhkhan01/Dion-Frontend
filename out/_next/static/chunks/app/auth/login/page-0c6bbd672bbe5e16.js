(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{4450:function(e,t,a){Promise.resolve().then(a.bind(a,1202))},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},1202:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(7437),r=a(2265),n=a(9376),o=a(7648),i=a(3145),l=a(5526),c=a(9501),u=a(3590),d=a(7119);let m=d.Ry({email:d.Z_().email("Please enter a valid email address"),password:d.Z_().min(6,"Password must be at least 6 characters")});function p(){let[e,t]=(0,r.useState)(!1),[a,d]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),f=(0,n.useRouter)(),b=(0,n.useSearchParams)(),w=b.get("type")||"contractor",y="partner"===w?"landlord":"client"===w?"contractor":w;(0,r.useEffect)(()=>{let e=b.get("message");e&&h(e)},[b]);let{register:v,handleSubmit:j,formState:{errors:k}}=(0,c.cI)({resolver:(0,u.F)(m)}),N=async e=>{t(!0),d(null);try{let{error:t}=await l.supabase.auth.signInWithPassword({email:e.email,password:e.password});if(t){t.message.includes("email not confirmed")||t.message.includes("Email not confirmed")?d("Your email is not confirmed. Please contact support or try signing up again."):t.message.includes("Invalid login credentials")?d("Invalid email or password. Please check your credentials."):d(t.message);return}await new Promise(e=>setTimeout(e,100));let{data:{user:a}}=await l.supabase.auth.getUser();if(a)try{let[e,t]=await Promise.all([l.supabase.from("contractor").select("role, email").eq("id",a.id).maybeSingle(),l.supabase.from("landlord").select("role, email").eq("id",a.id).maybeSingle()]),{data:s,error:r}=e,{data:n,error:o}=t;if(r&&console.error("Contractor query error details:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),"contractor"===y){if(!s){await l.supabase.auth.signOut(),d("This email does not have a client account. Please sign up as a client or try logging in as a partner.");return}try{let e=await fetch("https://jfgm6v6pkw.us-east-1.awsapprunner.com/api/client-login-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.id})});if(!e.ok){await l.supabase.auth.signOut(),d("Unable to verify account status. Please try again.");return}let t=await e.json();if(t.success&&!1===t.isActive){await l.supabase.auth.signOut(),d("Your account is currently inactive, Ask the admin to activate your account");return}if(!t.success){await l.supabase.auth.signOut(),d("Unable to verify account status. Please try again.");return}}catch(e){console.error("Error checking contractor active status:",e),await l.supabase.auth.signOut(),d("Unable to verify account status. Please try again.");return}f.push("/client");return}if("landlord"===y){if(!n){await l.supabase.auth.signOut(),d("This email does not have a partner account. Please sign up as a partner or try logging in as a client.");return}try{let e=await fetch("https://jfgm6v6pkw.us-east-1.awsapprunner.com/api/partner-login-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.id})});if(!e.ok){await l.supabase.auth.signOut(),d("Unable to verify account status. Please try again.");return}let t=await e.json();if(t.success&&!1===t.isActive){await l.supabase.auth.signOut(),d("Your account is currently inactive, Ask the admin to activate your account");return}if(!t.success){await l.supabase.auth.signOut(),d("Unable to verify account status. Please try again.");return}}catch(e){console.error("Error checking landlord active status:",e),await l.supabase.auth.signOut(),d("Unable to verify account status. Please try again.");return}f.push("/partner");return}if(s&&!r){f.push("/client");return}if(n&&!o){f.push("/partner");return}await l.supabase.auth.signOut(),d("No account profile found. Please contact support or create a new account.")}catch(e){console.error("Error checking user profile:",e),await l.supabase.auth.signOut(),d("An error occurred while checking your account. Please try again.")}else f.push("/")}catch(e){d("An unexpected error occurred")}finally{t(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 animate-ken-burns",style:{backgroundImage:"url(/Houses%20-%202.webp)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[rgba(11,29,52,0.88)] pointer-events-none animate-overlay-fade"}),(0,s.jsxs)(o.default,{href:"/",onClick:e=>{e.preventDefault(),window.location.href="/"},className:"absolute top-4 left-4 z-20 flex items-center justify-center text-white sm:px-4 sm:py-2 sm:gap-2 font-semibold hover:text-booking-teal transition-all duration-200","aria-label":"Back to home",style:{fontFamily:"var(--font-avenir-regular)"},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,s.jsx)("span",{className:"hidden sm:inline text-xl sm:text-2xl",children:"Go Back"})]}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-start min-h-screen px-2 sm:px-4 pb-12 sm:pb-16 -mt-12 sm:-mt-16",children:[(0,s.jsx)("div",{className:"flex justify-center -mb-12 sm:-mb-16 lg:-mb-20",children:(0,s.jsx)("div",{className:"animate-logo-entrance",children:(0,s.jsx)(i.default,{src:"/white-teal.webp",alt:"Logo",width:300,height:300,className:"w-48 h-48 sm:w-64 sm:h-64 lg:w-80 lg:h-80 object-contain drop-shadow-2xl",priority:!0})})}),(0,s.jsxs)("div",{className:"signup-card bg-white/95 backdrop-blur-sm rounded-xl sm:rounded shadow-xl sm:shadow-lg p-6 sm:p-6 lg:p-8 w-full max-w-xs sm:max-w-lg lg:max-w-2xl border border-gray-200/50 sm:border-gray-200 animate-card-entrance-1",children:[(0,s.jsx)("h1",{className:"text-base sm:text-2xl lg:text-3xl font-bold text-booking-dark mb-4 sm:mb-8 text-center leading-tight",children:"Sign In to Your Account"}),(0,s.jsxs)("form",{className:"space-y-3 sm:space-y-6",onSubmit:j(N),children:[a&&(0,s.jsx)("div",{className:"rounded-xl bg-red-50 border border-red-200 p-3 sm:p-4",children:(0,s.jsx)("div",{className:"text-xs sm:text-sm text-red-800",style:{fontFamily:"var(--font-avenir-regular)"},children:a})}),p&&(0,s.jsx)("div",{className:"rounded-xl bg-green-50 border border-green-200 p-3 sm:p-4",children:(0,s.jsx)("div",{className:"text-xs sm:text-sm text-green-800",style:{fontFamily:"var(--font-avenir-regular)"},children:p})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-xs sm:text-lg font-medium text-booking-dark mb-1 sm:mb-2 leading-tight",style:{fontFamily:"var(--font-avenir)",fontWeight:500,letterSpacing:"0.02em"},children:"Email Address"}),(0,s.jsx)("input",{...v("email"),type:"email",autoComplete:"email",className:"w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent ".concat(k.email?"border-red-500":""),placeholder:"Enter your email",style:{fontFamily:"var(--font-avenir-regular)"}}),k.email&&(0,s.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-red-600",style:{fontFamily:"var(--font-avenir-regular)"},children:k.email.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-xs sm:text-lg font-medium text-booking-dark mb-1 sm:mb-2 leading-tight",style:{fontFamily:"var(--font-avenir)",fontWeight:500,letterSpacing:"0.02em"},children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{...v("password"),type:g?"text":"password",autoComplete:"current-password",className:"w-full px-3 pr-10 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent ".concat(k.password?"border-red-500":""),placeholder:"Enter your password",style:{fontFamily:"var(--font-avenir-regular)"}}),(0,s.jsx)("button",{type:"button",onClick:()=>x(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":g?"Hide password":"Show password",children:g?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),k.password&&(0,s.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-red-600",style:{fontFamily:"var(--font-avenir-regular)"},children:k.password.message})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)(o.default,{href:"/auth/forgot-password",onClick:e=>{e.preventDefault(),window.location.href="/auth/forgot-password"},className:"text-xs sm:text-sm text-booking-teal hover:text-booking-dark font-medium",children:"Forgot your password?"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:e,className:"signup-btn w-full bg-booking-teal text-white font-bold py-3 sm:py-4 px-4 sm:px-6 rounded hover:bg-opacity-90 text-sm sm:text-lg",style:{fontFamily:"var(--font-avenir-regular)"},children:e?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-booking-gray",children:["Don't have an account?"," ",(0,s.jsx)(o.default,{href:"/auth/signup/".concat("contractor"===y?"client":"landlord"===y?"partner":y),onClick:e=>{e.preventDefault(),window.location.href="/auth/signup/".concat("contractor"===y?"client":"landlord"===y?"partner":y)},className:"text-booking-teal hover:text-booking-dark font-medium",children:"Create one here"})]})})]})]})]})]})}function h(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-booking-teal"})}),children:(0,s.jsx)(p,{})})}},5526:function(e,t,a){"use strict";a.r(t),a.d(t,{supabase:function(){return s}});let s=(0,a(8439).eI)("https://gtdjjsxtlgzntmuimyai.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0ZGpqc3h0bGd6bnRtdWlteWFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzA3MjEsImV4cCI6MjA3MzU0NjcyMX0.OIU7JU8oxYb6LrRuTbRJGhWtcy6gH7_5JlML23D2sWE")}},function(e){e.O(0,[439,648,145,626,971,117,744],function(){return e(e.s=4450)}),_N_E=e.O()}]);