(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{8302:function(e,s,t){Promise.resolve().then(t.bind(t,5420))},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},5420:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),r=t(2265),n=t(9376),o=t(7648),i=t(3145),l=t(5526);function d(){let[e,s]=(0,r.useState)(""),[t,d]=(0,r.useState)(""),[u,c]=(0,r.useState)(!1),[m,b]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[g,x]=(0,r.useState)(null),f=(0,n.useRouter)();(0,r.useEffect)(()=>{(async()=>{let{data:{session:e}}=await l.supabase.auth.getSession();if(e){let{data:{user:e}}=await l.supabase.auth.getUser();if(e){let{data:s}=await l.supabase.from("contractor").select("id").eq("id",e.id).maybeSingle();if(s)x("client");else{let{data:s}=await l.supabase.from("landlord").select("id").eq("id",e.id).maybeSingle();s&&x("partner")}}}else f.push("/auth/login?message=Invalid or expired reset link")})()},[f]);let w=async s=>{if(s.preventDefault(),c(!0),h(""),b(""),e!==t){h("Passwords do not match"),c(!1);return}if(e.length<6){h("Password must be at least 6 characters long"),c(!1);return}try{let{error:s}=await l.supabase.auth.updateUser({password:e});s?h(s.message):(b("Password updated successfully! Redirecting to login..."),setTimeout(()=>{let e="client"===g?"client":"partner"===g?"partner":"";f.push(e?"/auth/login?type=".concat(e,"&message=Password updated successfully"):"/auth/login?message=Password updated successfully")},2e3))}catch(e){h("An error occurred. Please try again.")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen relative overflow-hidden",style:{backgroundImage:"url(/360_F_281897358_3rj9ZBSZHo5s0L1ug7uuIHadSxh9Cc75.webp)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-white/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen py-4 px-2 sm:py-8 sm:px-4 pb-12 sm:pb-16",children:[(0,a.jsx)("div",{className:"mb-4 sm:mb-8 w-full max-w-xs sm:max-w-2xl py-2",children:(0,a.jsx)(i.default,{src:"/blue-teal.webp",alt:"Booking Hub Logo",width:800,height:200,className:"w-full h-auto object-contain",style:{maxWidth:"100%"},priority:!0})}),(0,a.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl sm:rounded shadow-xl sm:shadow-lg p-4 sm:p-6 lg:p-8 w-full max-w-sm sm:max-w-lg lg:max-w-2xl border border-gray-200/50 sm:border-gray-200",children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-booking-dark mb-6 sm:mb-8 text-center leading-tight",children:"Set New Password"}),(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4 sm:space-y-6",children:[p&&(0,a.jsx)("div",{className:"rounded-xl bg-red-50 border border-red-200 p-4",children:(0,a.jsx)("div",{className:"text-sm text-red-800",children:p})}),m&&(0,a.jsx)("div",{className:"rounded-xl bg-green-50 border border-green-200 p-4",children:(0,a.jsx)("div",{className:"text-sm text-green-800",children:m})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-booking-dark mb-2",children:"New Password"}),(0,a.jsx)("input",{type:"password",id:"password",value:e,onChange:e=>s(e.target.value),placeholder:"Enter your new password",required:!0,minLength:6,className:"w-full px-4 py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-booking-dark mb-2",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",id:"confirmPassword",value:t,onChange:e=>d(e.target.value),placeholder:"Confirm your new password",required:!0,minLength:6,className:"w-full px-4 py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-booking-teal text-white font-bold py-4 px-6 rounded hover:bg-opacity-90 transition-all duration-200 text-lg",children:u?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Updating Password..."]}):"Update Password"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-booking-gray",children:["Remember your password?"," ",(0,a.jsx)(o.default,{href:g?"/auth/login?type=".concat(g):"/auth/login",onClick:e=>{e.preventDefault(),window.location.href=g?"/auth/login?type=".concat(g):"/auth/login"},className:"text-booking-teal hover:text-booking-dark font-medium",children:"Sign in here"})]})})]})]})]})]})}},5526:function(e,s,t){"use strict";t.r(s),t.d(s,{supabase:function(){return a}});let a=(0,t(8439).eI)("https://gtdjjsxtlgzntmuimyai.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0ZGpqc3h0bGd6bnRtdWlteWFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzA3MjEsImV4cCI6MjA3MzU0NjcyMX0.OIU7JU8oxYb6LrRuTbRJGhWtcy6gH7_5JlML23D2sWE")}},function(e){e.O(0,[439,648,145,971,117,744],function(){return e(e.s=8302)}),_N_E=e.O()}]);