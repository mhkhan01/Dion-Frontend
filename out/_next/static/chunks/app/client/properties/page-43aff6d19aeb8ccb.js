(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82],{2449:function(e,s,r){Promise.resolve().then(r.bind(r,1528))},9376:function(e,s,r){"use strict";var t=r(5475);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},1528:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var t=r(7437),a=r(2265),n=r(7766),i=r(9376),c=r(7648),l=r(4114),o=r(5526);function d(){let{user:e,loading:s}=(0,n.a)(),r=(0,i.useRouter)(),[d,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!s&&!e){r.push("/auth/login");return}if(e&&"contractor"!==e.role){r.push("/");return}},[e,s,r]),(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{let{data:e,error:s}=await o.supabase.from("properties").select("*").order("created_at",{ascending:!1});if(s){console.error("Error fetching properties:",s);return}m(e||[])}catch(e){console.error("Error fetching properties:",e)}finally{x(!1)}};return s||u?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(l.Z,{}),(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(l.Z,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Available Properties"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Browse and book properties for your projects"})]}),0===d.length?(0,t.jsxs)("div",{className:"card p-12 text-center",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No properties available"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Check back later for new property listings."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>(0,t.jsxs)("div",{className:"card p-6 hover:shadow-apple-lg transition-shadow duration-200",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.address}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-3",children:e.description}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("span",{className:"text-2xl font-bold text-primary-600",children:["$",e.price]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"per day"})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(c.default,{href:"/properties/".concat(e.id),className:"btn btn-secondary flex-1",children:"View Details"}),(0,t.jsx)(c.default,{href:"/client/properties/".concat(e.id,"/book"),className:"btn btn-primary flex-1",children:"Book Now"})]})]},e.id))})]})]}):null}}},function(e){e.O(0,[439,648,114,971,117,744],function(){return e(e.s=2449)}),_N_E=e.O()}]);