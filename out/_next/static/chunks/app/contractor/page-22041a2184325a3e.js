(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{1118:function(e,t,n){Promise.resolve().then(n.bind(n,3060))},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},4601:function(){},8975:function(e,t,n){"use strict";var s=n(257);n(4601);var a=n(2265),r=a&&"object"==typeof a&&"default"in a?a:{default:a},o=void 0!==s&&s.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,n=t.name,s=void 0===n?"stylesheet":n,a=t.optimizeForSpeed,r=void 0===a?o:a;d(i(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",d("boolean"==typeof r,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=r,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),n},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(d(i(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var n=this.getSheet();"number"!=typeof t&&(t=n.cssRules.length);try{n.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var s=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,s))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var n="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(t,e)}catch(s){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}}else{var s=this._tags[e];d(s,"old rule at index `"+e+"` not found"),s.textContent=t}return e},t.deleteRule=function(e){if("undefined"==typeof window){this._serverSheet.deleteRule(e);return}if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},t.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,n){return n?t=t.concat(Array.prototype.map.call(e.getSheetForTag(n).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,n){t&&d(i(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return n?a.insertBefore(s,n):a.appendChild(s),s},function(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},m={};function u(e,t){if(!t)return"jsx-"+e;var n=String(t),s=e+n;return m[s]||(m[s]="jsx-"+c(e+"-"+n)),m[s]}function x(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var n=e+t;return m[n]||(m[n]=t.replace(/__jsx-style-dynamic-selector/g,e)),m[n]}var h=function(){function e(e){var t=void 0===e?{}:e,n=t.styleSheet,s=void 0===n?null:n,a=t.optimizeForSpeed,r=void 0!==a&&a;this._sheet=s||new l({name:"styled-jsx",optimizeForSpeed:r}),this._sheet.inject(),s&&"boolean"==typeof r&&(this._sheet.setOptimizeForSpeed(r),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var n=this.getIdAndRules(e),s=n.styleId,a=n.rules;if(s in this._instancesCounts){this._instancesCounts[s]+=1;return}var r=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[s]=r,this._instancesCounts[s]=1},t.remove=function(e){var t=this,n=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var s=this._fromServer&&this._fromServer[n];s?(s.parentNode.removeChild(s),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],n=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,n;return t=this.cssRules(),void 0===(n=e)&&(n={}),t.map(function(e){var t=e[0],s=e[1];return r.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:s}})})},t.getIdAndRules=function(e){var t=e.children,n=e.dynamic,s=e.id;if(n){var a=u(s,n);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return x(a,e)}):[x(a,t)]}}return{styleId:u(s),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),g=a.createContext(null);g.displayName="StyleSheetContext";var f=r.default.useInsertionEffect||r.default.useLayoutEffect,p="undefined"!=typeof window?new h:void 0;function b(e){var t=p||a.useContext(g);return t&&("undefined"==typeof window?t.add(e):f(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}b.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=b},29:function(e,t,n){"use strict";e.exports=n(8975).style},3060:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n(7437),a=n(29),r=n.n(a),o=n(2265),i=n(7766),l=n(9376),d=n(5526);function c(e){let{isOpen:t,onClose:n,editingBookingRequestId:a=null,onSuccess:r}=e,{user:l}=(0,i.a)(),[c,m]=(0,o.useState)({fullName:"",companyName:"",email:"",phone:"",projectPostcode:"",teamSize:"",city:""}),[u,x]=(0,o.useState)([{id:"1",startDate:"",endDate:""}]),[h,g]=(0,o.useState)(""),[f,p]=(0,o.useState)(!1),[b,v]=(0,o.useState)(!1),[k,y]=(0,o.useState)(!1),j=(0,o.useRef)(null),w=e=>{let{name:t,value:n}=e.target;m(e=>({...e,[t]:n}))},N=e=>{u.length>1&&x(t=>t.filter(t=>t.id!==e))},_=(e,t,n)=>{x(s=>s.map(s=>s.id===e?{...s,[t]:n}:s))};(0,o.useEffect)(()=>{(async()=>{if((null==l?void 0:l.id)&&t)try{let{data:e,error:t}=await d.supabase.from("contractor").select("*").eq("id",l.id).single();if(t&&"PGRST116"!==t.code){console.error("Error fetching contractor data:",t);return}e&&m(t=>({...t,fullName:e.full_name||t.fullName,companyName:e.company_name||t.companyName,email:e.company_email||l.email||t.email,phone:e.phone||t.phone}))}catch(e){console.error("Error fetching contractor data:",e)}})()},[l,t]),(0,o.useEffect)(()=>{(async()=>{if(a&&t)try{let{data:t,error:n}=await d.supabase.from("booking_requests").select("*").eq("id",a).single();if(n){console.error("Error fetching booking request for edit:",n);return}if(t){var e;m({fullName:t.full_name||"",companyName:t.company_name||"",email:t.email||"",phone:t.phone||"",projectPostcode:t.project_postcode||"",teamSize:(null===(e=t.team_size)||void 0===e?void 0:e.toString())||"",city:t.city||""}),g(t.budget_per_person_week||"");let{data:n,error:s}=await d.supabase.from("booking_dates").select("*").eq("booking_request_id",a).order("start_date",{ascending:!0});!s&&n&&n.length>0&&x(n.map(e=>({id:e.id,startDate:e.start_date,endDate:e.end_date})))}}catch(e){console.error("Error fetching booking data:",e)}})()},[a,t]),(0,o.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let S=async e=>{e.preventDefault(),v(!0);try{let e;if(a){let{error:t}=await d.supabase.from("booking_requests").update({full_name:c.fullName,company_name:c.companyName,email:c.email,phone:c.phone,project_postcode:c.projectPostcode,team_size:c.teamSize?parseInt(c.teamSize):null,budget_per_person_week:h,city:c.city}).eq("id",a);if(t){console.error("Error updating booking request:",t),alert("Failed to update booking request. Please try again."),v(!1);return}let{error:n}=await d.supabase.from("booking_dates").delete().eq("booking_request_id",a);if(n){console.error("Error deleting existing booking dates:",n),alert("Failed to update booking dates. Please try again."),v(!1);return}e={id:a}}else{let{data:t,error:n}=await d.supabase.from("booking_requests").insert({full_name:c.fullName,company_name:c.companyName,email:c.email,phone:c.phone,project_postcode:c.projectPostcode,team_size:c.teamSize?parseInt(c.teamSize):null,budget_per_person_week:h,status:"pending",user_id:(null==l?void 0:l.id)||null,city:c.city}).select().single();if(n){console.error("Error saving to Supabase:",n),alert("Failed to save booking request. Please try again."),v(!1);return}e=t}if(e&&u.length>0){let t=u.filter(e=>e.startDate&&e.endDate&&""!==e.startDate.trim()&&""!==e.endDate.trim());if(t.length>0){let n=t.map(t=>({booking_request_id:e.id,start_date:t.startDate.trim(),end_date:t.endDate.trim()}));for(let e of n)if(new Date(e.start_date)>=new Date(e.end_date)){alert("Invalid date range: Start date must be before end date."),v(!1);return}let{error:s}=await d.supabase.from("booking_dates").insert(n);if(s){console.error("Error saving booking dates:",s),alert("Failed to save booking dates. Please try again."),v(!1);return}}}y(!0),setTimeout(()=>{y(!1),m({fullName:"",companyName:"",email:"",phone:"",projectPostcode:"",teamSize:"",city:""}),x([{id:"1",startDate:"",endDate:""}]),g(""),v(!1),r&&r(),n()},2e3)}catch(e){console.error("Error submitting form:",e),alert("An error occurred. Please try again."),v(!1)}};return t?k?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h3",{className:"text-2xl font-avenir-bold font-bold text-booking-dark mb-2",children:"Success!"}),(0,s.jsxs)("p",{className:"text-booking-gray font-avenir tracking-wide",children:["Your booking request has been ",a?"updated":"submitted"," successfully."]})]})}):(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("img",{src:"/blue-teal.webp",alt:"Logo",className:"h-6 sm:h-10 w-auto object-contain"}),(0,s.jsx)("h2",{className:"text-xl font-avenir-bold text-booking-dark sm:text-3xl sm:absolute sm:left-1/2 sm:-translate-x-1/2",children:a?"Edit Request":"Create Request"})]}),(0,s.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",type:"button",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"px-6 py-6 pb-8",children:(0,s.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Where do you need accommodation?"}),(0,s.jsx)("input",{type:"text",id:"city",name:"city",value:c.city,onChange:w,placeholder:"e.g. London",className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"projectPostcode",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Accommodation Postcode"}),(0,s.jsx)("input",{type:"text",id:"projectPostcode",name:"projectPostcode",value:c.projectPostcode,onChange:w,className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",placeholder:"Enter postcode"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Booking Dates"}),u.map((e,t)=>(0,s.jsxs)("div",{className:"mb-3",children:[u.length>1&&(0,s.jsx)("div",{className:"flex justify-end items-center mb-2",children:(0,s.jsx)("button",{type:"button",onClick:()=>N(e.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:e.startDate,onChange:t=>_(e.id,"startDate",t.target.value),className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:e.endDate,onChange:t=>_(e.id,"endDate",t.target.value),className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",required:!0})]})]})]},e.id)),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("button",{type:"button",onClick:()=>{let e={id:"new-".concat(Date.now()),startDate:"",endDate:""};x(t=>[...t,e])},className:"w-full sm:w-auto bg-booking-teal text-white px-4 py-2 rounded-lg hover:bg-booking-dark transition-colors duration-200 text-sm font-avenir tracking-wide",children:"+ Add Booking"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"teamSize",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"How many people?"}),(0,s.jsx)("input",{type:"number",id:"teamSize",name:"teamSize",value:c.teamSize,onChange:w,min:"1",className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",placeholder:"Number of people",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"budgetPerPerson",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Nightly budget"}),(0,s.jsx)("input",{type:"number",id:"budgetPerPerson",name:"budgetPerPerson",value:h,onChange:e=>g(e.target.value),min:"0",className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",placeholder:"Enter budget"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Name *"}),(0,s.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:c.fullName,onChange:w,className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",placeholder:"Your full name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"companyName",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Company Name *"}),(0,s.jsx)("input",{type:"text",id:"companyName",name:"companyName",value:c.companyName,onChange:w,className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",placeholder:"Company name",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Company Email *"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:c.email,onChange:w,className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",placeholder:"your.email@company.com",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Phone *"}),(0,s.jsx)("input",{type:"tel",id:"phone",name:"phone",value:c.phone,onChange:w,className:"w-full px-4 py-2 sm:py-3 text-sm sm:text-base font-avenir tracking-wide placeholder:text-xs sm:placeholder:text-sm border border-booking-teal rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",placeholder:"Your phone number",required:!0})]})]}),(0,s.jsxs)("div",{className:"pt-4 space-y-4",children:[(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-center text-booking-gray font-avenir tracking-wide",children:["By submitting, you agree to our"," ",(0,s.jsx)("a",{href:"/terms",target:"_blank",className:"text-booking-teal hover:underline",children:"Client Terms & Conditions"}),"."]}),(0,s.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-booking-teal text-white px-6 py-3 rounded-lg font-avenir tracking-wide text-base hover:bg-opacity-90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Submitting...":a?"Update Request":"Submit Request"})]})]})})]})}):null}function m(){let{user:e,loading:t,signOut:n}=(0,i.a)(),a=(0,l.useRouter)(),[m,u]=(0,o.useState)([]),[x,h]=(0,o.useState)(!1),[g,f]=(0,o.useState)("dashboard"),[p,b]=(0,o.useState)(""),[v,k]=(0,o.useState)(""),[y,j]=(0,o.useState)("active"),[w,N]=(0,o.useState)(!1),[_,S]=(0,o.useState)(null),[C,L]=(0,o.useState)(new Set(["search"])),[z,D]=(0,o.useState)({search:"",postcode:"",startDate:"",endDate:""}),[E,q]=(0,o.useState)(!1),[F,R]=(0,o.useState)({company_name:"",company_email:"",company_address:"",phone:"",client_type:""}),[M,P]=(0,o.useState)(""),[A,B]=(0,o.useState)(!1),[I,W]=(0,o.useState)(null),[T,O]=(0,o.useState)(!1),[H,V]=(0,o.useState)(!1),[Y,U]=(0,o.useState)(null),[G,J]=(0,o.useState)(!1),[X,Z]=(0,o.useState)(!1),Q=async()=>{if(null==e?void 0:e.id)try{let{data:t,error:n}=await d.supabase.from("contractor").select("full_name, company_name, company_email, company_address, phone, client_type, role").eq("id",e.id).single();if(n&&"PGRST116"!==n.code){console.error("Error fetching contractor data:",n);return}if(t){console.log("Contractor data fetched:",t),P(t.full_name||(null==e?void 0:e.full_name)||"");let n=t.client_type||("contractor"===t.role?"Client":"");R({company_name:t.company_name||"",company_email:t.company_email||(null==e?void 0:e.email)||"",company_address:t.company_address||"",phone:t.phone||"",client_type:n})}else console.log("No contractor data found, using user data"),P((null==e?void 0:e.full_name)||""),R({company_name:"",company_email:(null==e?void 0:e.email)||"",company_address:"",phone:"",client_type:"Client"})}catch(e){console.error("Error fetching contractor data:",e)}},K=async()=>{if(null==e?void 0:e.id)try{let t;let{data:n,error:s}=await d.supabase.from("contractor").select("id").eq("id",e.id).single();if(s&&"PGRST116"!==s.code){console.error("Error checking contractor data:",s),alert("Error checking contractor information. Please try again.");return}(t=n?await d.supabase.from("contractor").update({company_name:F.company_name,company_email:F.company_email,company_address:F.company_address,phone:F.phone,client_type:F.client_type}).eq("id",e.id):await d.supabase.from("contractor").insert({id:e.id,email:e.email||"",full_name:e.full_name||"",role:"contractor",company_name:F.company_name,company_email:F.company_email,company_address:F.company_address,phone:F.phone,client_type:F.client_type})).error?console.error("Error updating contractor data:",t.error):(B(!0),setTimeout(()=>B(!1),5e3))}catch(e){console.error("Error updating contractor data:",e),alert("Error updating contact information: ".concat(e instanceof Error?e.message:"Unknown error"))}};(0,o.useEffect)(()=>{if(!t&&!e){a.push("/auth/login");return}if(e&&"contractor"!==e.role){a.push("/");return}},[e,t,a]),(0,o.useEffect)(()=>{let e=e=>{E&&!e.target.closest(".filter-dropdown-container")&&q(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[E]),(0,o.useEffect)(()=>{e?($(),et()):h(!1)},[e]),(0,o.useEffect)(()=>{"contact-info"===g&&(null==e?void 0:e.id)&&Q()},[g,null==e?void 0:e.id]),(0,o.useEffect)(()=>{(null==e?void 0:e.full_name)&&!M&&P(e.full_name)},[null==e?void 0:e.full_name,M]),(0,o.useEffect)(()=>{let e=e=>{_&&S(null),G&&!e.target.closest(".role-dropdown-container")&&J(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[_,G]);let $=async()=>{if(null==e?void 0:e.id)try{let{data:t,error:n}=await d.supabase.from("contractor").select("full_name").eq("id",e.id).single();if(n){console.error("Error fetching contractor name:",n);return}(null==t?void 0:t.full_name)&&b(t.full_name)}catch(e){console.error("Error fetching contractor name:",e)}},ee=async(e,t)=>{try{let{data:n,error:s}=await d.supabase.from("booking_requests").select("\n          id,\n          full_name,\n          email,\n          company_name,\n          team_size,\n          budget_per_person_week,\n          project_postcode,\n          status,\n          booking_dates(\n            id,\n            start_date,\n            end_date,\n            status\n          )\n        ").eq("id",e).single();if(s){console.error("Error fetching booking details:",s);return}if(n&&n.booking_dates){let e=n.booking_dates.find(e=>e.id===t);e&&e.status&&(n.status=e.status),n.booking_dates=n.booking_dates.filter(e=>e.id===t)}W(n),O(!0)}catch(e){console.error("Error fetching booking details:",e)}},et=async()=>{try{h(!0);let{data:t,error:n}=await d.supabase.from("booking_requests").select("\n          *,\n          booking_dates(\n            id,\n            start_date,\n            end_date,\n            status,\n            created_at\n          )\n        ").or("user_id.eq.".concat(null==e?void 0:e.id,",email.eq.").concat(null==e?void 0:e.email)).order("created_at",{ascending:!1});if(n){console.error("Error fetching booking requests:",n);return}let s=[];if(t){for(let e of t)if(e.booking_dates&&e.booking_dates.length>0)for(let t of e.booking_dates){let n;let a=t.status||e.status;if("confirmed"===a)try{let{data:e}=await d.supabase.auth.getSession();if(e.session){let s=await fetch("https://jfgm6v6pkw.us-east-1.awsapprunner.com/api/booking-values/".concat(t.id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.session.access_token)}});if(s.ok){let e=await s.json();e.success&&e.value&&(n=e.value)}else console.error("Failed to fetch booking value from backend:",s.status)}}catch(e){console.error("Error fetching booking value:",e)}s.push({id:t.id,booking_request_id:e.id,property_id:e.assigned_property_id||"",start_date:t.start_date,end_date:t.end_date,status:a,created_at:e.created_at,property:{title:"".concat(e.company_name||"N/A"," | Number of people: ").concat(e.team_size||"N/A"),address:e.project_postcode||"Location TBD",price:e.budget_per_person_week||0},value:n})}}u(s)}catch(e){console.error("Error fetching bookings:",e)}finally{h(!1)}},en=async()=>{e&&await n(),a.push("/")};if(t)return(0,s.jsx)("div",{className:"min-h-screen bg-booking-bg",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-booking-teal"})})});let es=m.filter(e=>"confirmed"===e.status||"paid"===e.status),ea=m.filter(e=>"pending"===e.status);return(0,s.jsxs)("div",{className:"h-screen bg-gray-50 flex flex-col lg:flex-row overflow-hidden",children:[(0,s.jsxs)("div",{className:"lg:hidden bg-booking-dark text-white p-4 flex items-center relative",children:[(0,s.jsx)("img",{src:"/white-teal.webp",alt:"Booking Hub Logo",className:"h-8 w-auto object-contain py-1 mr-3",style:{maxWidth:"100%"}}),(0,s.jsx)("p",{className:"absolute left-1/2 -translate-x-1/2 text-xl font-avenir tracking-wide font-bold text-white pointer-events-none",children:"Client Portal"}),(0,s.jsx)("button",{onClick:()=>N(!w),className:"ml-auto p-2 rounded-lg hover:bg-gray-700 transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),w&&(0,s.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>N(!1)}),(0,s.jsxs)("div",{className:"fixed top-0 left-0 h-full w-64 bg-booking-dark text-white transform transition-transform duration-300 ease-in-out",children:[(0,s.jsx)("div",{className:"p-4 bg-booking-dark",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2 py-2",children:[(0,s.jsx)("img",{src:"/white-teal.webp",alt:"Booking Hub Logo",className:"h-12 w-auto object-contain",style:{maxWidth:"100%"}}),(0,s.jsx)("p",{className:"text-lg font-avenir tracking-wide font-bold text-white",children:"Client Portal"})]}),(0,s.jsx)("button",{onClick:()=>N(!1),className:"p-2 rounded-lg hover:bg-gray-700 transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("nav",{className:"p-4 space-y-2 font-avenir tracking-wide",children:[(0,s.jsx)("button",{onClick:()=>{f("dashboard"),N(!1)},className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("dashboard"===g?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Dashboard"}),"dashboard"===g&&(0,s.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,s.jsx)("button",{onClick:()=>{f("booking-requests"),N(!1)},className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("booking-requests"===g?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Booking Requests"}),"booking-requests"===g&&(0,s.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,s.jsx)("button",{onClick:()=>{f("contact-info"),N(!1)},className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("contact-info"===g?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Contact Information"}),"contact-info"===g&&(0,s.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})})]}),(0,s.jsxs)("div",{className:"p-4 mt-auto",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-booking-teal rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-semibold text-sm",children:p?p.charAt(0).toUpperCase():"C"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-avenir font-medium text-white",children:p||"Contractor"}),(0,s.jsx)("p",{className:"text-xs font-avenir text-gray-300",children:"Client"})]})]}),(0,s.jsx)("button",{onClick:()=>{Z(!0),N(!1)},className:"w-full px-4 py-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("span",{className:"text-sm font-avenir font-medium",children:"Logout"})]})})]})]})]}),(0,s.jsxs)("div",{className:"hidden lg:flex w-64 bg-booking-dark text-white flex-col h-screen flex-shrink-0 overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 bg-booking-dark",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2 py-2",children:[(0,s.jsx)("img",{src:"/white-teal.webp",alt:"Booking Hub Logo",className:"h-12 w-auto object-contain",style:{maxWidth:"100%"}}),(0,s.jsx)("p",{className:"text-lg font-avenir tracking-wide font-bold text-white",children:"Client Portal"})]})}),(0,s.jsxs)("nav",{className:"flex-1 p-4 space-y-2 font-avenir tracking-wide",children:[(0,s.jsx)("button",{onClick:()=>f("dashboard"),className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("dashboard"===g?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),(0,s.jsx)("span",{className:"text-sm lg:text-base font-medium",children:"Dashboard"}),"dashboard"===g&&(0,s.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,s.jsx)("button",{onClick:()=>f("booking-requests"),className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("booking-requests"===g?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,s.jsx)("span",{className:"text-sm lg:text-base font-medium",children:"Booking Requests"}),"booking-requests"===g&&(0,s.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,s.jsx)("button",{onClick:()=>f("contact-info"),className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("contact-info"===g?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,s.jsx)("span",{className:"text-sm lg:text-base font-medium",children:"Contact Information"}),"contact-info"===g&&(0,s.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-booking-teal rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-semibold text-sm",children:p?p.charAt(0).toUpperCase():"C"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm lg:text-base font-avenir font-medium text-white",children:p||"Contractor"}),(0,s.jsx)("p",{className:"text-xs lg:text-sm font-avenir text-gray-300",children:"Client"})]})]}),(0,s.jsx)("button",{onClick:()=>Z(!0),className:"w-full px-4 py-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("span",{className:"text-sm lg:text-base font-avenir font-medium",children:"Logout"})]})})]})]}),(0,s.jsx)("div",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto overflow-x-hidden",children:(()=>{switch(g){case"dashboard":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-avenir-bold tracking-wide font-bold text-booking-dark",children:"Analytics"}),(0,s.jsx)("p",{className:"text-sm sm:text-base font-avenir font-medium tracking-wide text-booking-gray",children:"Accommodation booking overview"})]}),(0,s.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:(0,s.jsx)("button",{onClick:()=>{U(null),V(!0)},className:"w-full sm:w-auto text-white px-6 py-3 sm:px-8 sm:py-4 lg:px-10 lg:py-5 rounded-lg transition-all duration-200 font-avenir font-medium tracking-wide font-bold text-base sm:text-lg lg:text-xl shadow-lg hover:shadow-xl transform hover:scale-105 whitespace-nowrap",style:{background:"linear-gradient(to right, #00BAB5, rgba(0, 186, 181, 0.54))"},children:"Create Booking Request"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"rounded-xl sm:rounded-2xl p-3 sm:p-4 lg:p-6 text-white",style:{background:"linear-gradient(to top, #00BAB5, rgba(0, 186, 181, 0.54))"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3 lg:mb-4",children:[(0,s.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-avenir-bold tracking-wide font-semibold",children:"Active Requests"}),(0,s.jsx)("div",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-4 lg:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("div",{className:"text-xl sm:text-2xl lg:text-3xl font-avenir font-bold tracking-wide mb-1 sm:mb-2",children:es.length}),(0,s.jsx)("div",{className:"text-xs sm:text-sm font-avenir font-medium tracking-wide opacity-90 mb-2 sm:mb-3 lg:mb-4",children:"Currently active projects"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 text-xs sm:text-sm font-avenir font-medium tracking-wide",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,s.jsxs)("span",{children:["Confirmed: ",es.filter(e=>"confirmed"===e.status).length]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-white bg-opacity-60 rounded-full"}),(0,s.jsxs)("span",{children:["Paid: ",es.filter(e=>"paid"===e.status).length]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl sm:rounded-2xl p-3 sm:p-4 lg:p-6 shadow-lg border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3 lg:mb-4",children:[(0,s.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-avenir-bold tracking-wide font-semibold text-booking-dark",children:"Pending Requests"}),(0,s.jsx)("div",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-4 lg:h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("div",{className:"text-xl sm:text-2xl lg:text-3xl font-avenir font-bold tracking-wide text-booking-dark mb-1 sm:mb-2",children:ea.length}),(0,s.jsx)("div",{className:"text-xs sm:text-sm font-avenir font-medium tracking-wide text-booking-gray mb-2 sm:mb-3 lg:mb-4",children:"Awaiting approval"}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2 sm:mb-3 lg:mb-4",children:(0,s.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"".concat(Math.min(ea.length/10*100,100),"%")}})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-0 text-xs sm:text-sm font-avenir font-medium tracking-wide text-booking-gray",children:[(0,s.jsxs)("span",{children:["This week: ",ea.length]}),(0,s.jsxs)("span",{children:["+",Math.floor(5*Math.random()),"% from last week"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-avenir-bold tracking-wide font-semibold text-booking-dark",children:"Request Activity"}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("button",{onClick:()=>j("active"),className:"px-4 py-2 text-xs sm:text-sm font-avenir font-medium tracking-wide rounded-lg transition-all duration-200 ".concat("active"===y?"text-booking-teal border-b-2 border-booking-teal bg-booking-bg":"text-booking-gray hover:text-booking-dark"),children:"Confirmed"}),(0,s.jsx)("button",{onClick:()=>j("pending"),className:"px-4 py-2 text-xs sm:text-sm font-avenir font-medium tracking-wide rounded-lg transition-all duration-200 ".concat("pending"===y?"text-booking-teal border-b-2 border-booking-teal bg-booking-bg":"text-booking-gray hover:text-booking-dark"),children:"Pending"})]})]}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:(0,s.jsxs)("div",{className:"w-full sm:flex-1 sm:max-w-md",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-4",children:[(0,s.jsxs)("div",{className:"relative filter-dropdown-container",children:[(0,s.jsxs)("button",{onClick:()=>q(!E),className:"w-full sm:w-28 md:w-32 lg:w-36 px-2 py-1.5 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent bg-white flex items-center justify-between gap-1.5 font-avenir font-medium tracking-wide",style:{fontSize:"11px"},children:[(0,s.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),(0,s.jsx)("span",{className:"flex-1 text-left",children:1===C.size&&C.has("search")?"Search All":1===C.size&&C.has("postcode")?"Postcode":1===C.size&&C.has("startDate")?"Start Date":1===C.size&&C.has("endDate")?"End Date":"".concat(C.size," Filters")}),(0,s.jsx)("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&(0,s.jsx)("div",{className:"absolute top-full left-0 z-10 w-full sm:w-48 bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:(0,s.jsx)("div",{className:"p-2 space-y-1",children:[{value:"search",label:"Search All"},{value:"postcode",label:"Filter by Postcode"},{value:"startDate",label:"Filter by Start Date"},{value:"endDate",label:"Filter by End Date"}].map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[(0,s.jsx)("input",{type:"checkbox",checked:C.has(e.value),onChange:t=>{let n=new Set(C);t.target.checked?n.add(e.value):(n.delete(e.value),D(t=>({...t,[e.value]:""}))),L(n)},className:"w-3 h-3 text-booking-teal focus:ring-booking-teal"}),(0,s.jsx)("span",{className:"text-xs font-avenir font-medium tracking-wide",style:{fontSize:"11px"},children:e.label})]},e.value))})})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[C.has("search")&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search requests...",value:z.search,onChange:e=>D(t=>({...t,search:e.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent font-avenir font-medium tracking-wide"}),(0,s.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),C.has("postcode")&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g., SW1A 1AA",value:z.postcode,onChange:e=>D(t=>({...t,postcode:e.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent font-avenir font-medium tracking-wide"}),(0,s.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),C.has("startDate")&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"date",placeholder:"Select start date",value:z.startDate,onChange:e=>D(t=>({...t,startDate:e.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent font-avenir font-medium tracking-wide"}),(0,s.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),C.has("endDate")&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"date",placeholder:"Select end date",value:z.endDate,onChange:e=>D(t=>({...t,endDate:e.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent font-avenir font-medium tracking-wide"}),(0,s.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]})]}),(Object.values(z).some(e=>e)||C.size>1||!C.has("search"))&&(0,s.jsx)("button",{onClick:()=>{L(new Set(["search"])),D({search:"",postcode:"",startDate:"",endDate:""})},className:"mt-2 text-xs font-avenir font-medium tracking-wide text-booking-gray hover:text-booking-dark underline",children:"Clear Filter"})]})}),(0,s.jsx)("div",{children:(()=>{let e="active"===y?es:ea;if(C.has("search")&&z.search&&(e=e.filter(e=>e.property.title.toLowerCase().includes(z.search.toLowerCase())||e.property.address.toLowerCase().includes(z.search.toLowerCase()))),C.has("postcode")&&z.postcode&&(e=e.filter(e=>e.property.address.toLowerCase().includes(z.postcode.toLowerCase()))),C.has("startDate")&&z.startDate){let t=new Date(z.startDate);e=e.filter(e=>{let n=new Date(e.start_date),s=new Date(t.getFullYear(),t.getMonth(),t.getDate());return new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()===s.getTime()})}if(C.has("endDate")&&z.endDate){let t=new Date(z.endDate);e=e.filter(e=>{let n=new Date(e.end_date),s=new Date(t.getFullYear(),t.getMonth(),t.getDate());return new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()===s.getTime()})}let t=e;return t.length>0?(0,s.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,s.jsxs)("div",{onClick:()=>e.booking_request_id&&ee(e.booking_request_id,e.id),className:"flex items-center justify-between py-3 border-b border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ".concat("active"===y?"bg-booking-teal":"bg-yellow-500"),children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:"active"===y?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-xs sm:text-base font-avenir-bold tracking-wide font-semibold text-booking-dark truncate",children:(()=>{let t=e.property.title.split(" | ");return 2===t.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-avenir-bold tracking-wide",children:t[0]}),(0,s.jsxs)("span",{className:"font-avenir font-medium tracking-wide",children:[" | ",t[1]]})]}):(0,s.jsx)("span",{className:"font-avenir font-medium tracking-wide",children:e.property.title})})()}),(0,s.jsx)("p",{className:"text-[10px] sm:text-sm font-avenir font-medium tracking-wide text-booking-gray truncate",children:e.property.address}),(0,s.jsxs)("p",{className:"text-[10px] sm:text-sm font-avenir font-medium tracking-wide text-booking-gray truncate",children:[new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm font-avenir font-semibold tracking-wide text-booking-dark",children:e.property.price}),(0,s.jsx)("div",{className:"text-xs font-avenir font-medium tracking-wide text-booking-gray",children:"per night"}),"confirmed"===e.status&&e.value&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-sm font-avenir font-semibold tracking-wide text-green-700 mt-1",children:e.value}),(0,s.jsx)("div",{className:"text-xs font-avenir font-medium tracking-wide text-green-600",children:"booking value"})]})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-avenir font-medium tracking-wide ".concat("confirmed"===e.status?"bg-green-100 text-green-800":"paid"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:"confirmed"===e.status?"Confirmed":"paid"===e.status?"Paid":"Pending"})]})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-booking-bg rounded-full flex items-center justify-center mx-auto mb-3",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-booking-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:"active"===y?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("h3",{className:"text-base font-avenir-bold tracking-wide font-semibold text-booking-dark mb-1",children:["No ","active"===y?"Active":"Pending"," Requests"]}),(0,s.jsx)("p",{className:"text-sm font-avenir font-medium tracking-wide text-booking-gray",children:"active"===y?"You don't have any active booking requests at the moment.":"You don't have any pending booking requests at the moment."})]})})()})]})]});case"booking-requests":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-avenir-bold tracking-wide font-bold text-booking-dark",children:"Booking Requests"}),(0,s.jsx)("p",{className:"font-avenir font-medium tracking-wide text-booking-gray",children:"Manage your booking requests"})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100",children:m.length>0?(0,s.jsx)("div",{className:"p-6",children:m.map(e=>(0,s.jsx)("div",{className:"border-b border-gray-100 last:border-b-0 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-sm lg:text-base font-avenir font-semibold tracking-wide text-booking-dark whitespace-nowrap lg:whitespace-normal overflow-hidden text-ellipsis",children:e.property.title}),(0,s.jsx)("p",{className:"text-xs lg:text-sm font-avenir font-semibold tracking-wide text-booking-teal mb-0.5",children:e.id}),(0,s.jsx)("p",{className:"text-xs lg:text-sm font-avenir font-medium tracking-wide text-booking-gray mb-0.5",children:e.property.address}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("span",{className:"text-xs lg:text-sm font-avenir font-medium tracking-wide text-booking-gray",children:[new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]}),(0,s.jsxs)("span",{className:"text-xs lg:text-sm font-avenir font-semibold tracking-wide text-booking-teal",children:[e.property.price||0," per night"]}),"confirmed"===e.status&&e.value&&(0,s.jsxs)("span",{className:"text-xs lg:text-sm font-avenir font-semibold tracking-wide text-green-700 mt-1",children:["Booking Value: ",e.value]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs lg:text-sm font-avenir font-medium tracking-wide ".concat("confirmed"===e.status?"bg-green-100 text-green-800":"paid"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:"confirmed"===e.status?"Confirmed":"paid"===e.status?"Paid":"Pending"}),(0,s.jsx)("button",{onClick:()=>{U(e.booking_request_id||null),V(!0)},className:"text-booking-teal hover:text-booking-dark text-xs lg:text-sm font-avenir font-medium tracking-wide underline",children:"Edit"})]})]})},e.id))}):(0,s.jsxs)("div",{className:"p-12 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-booking-bg rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-booking-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,s.jsx)("h3",{className:"text-lg font-avenir-bold tracking-wide font-semibold text-booking-dark mb-2",children:"No Booking Requests"}),(0,s.jsx)("p",{className:"font-avenir font-medium tracking-wide text-booking-gray",children:"You don't have any booking requests."})]})})]});case"contact-info":return(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 h-full overflow-hidden",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-avenir-bold tracking-wide font-bold text-booking-dark",children:"Contact Information"}),(0,s.jsx)("p",{className:"text-sm sm:text-base font-avenir font-medium tracking-wide text-booking-gray",children:"Manage your contact details and preferences"})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 lg:p-8 shadow-lg border border-gray-100",children:(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",value:M,placeholder:"Full Name",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir font-medium tracking-wide border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",readOnly:!0})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"email",value:(null==e?void 0:e.email)||"",placeholder:"Company Email",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir font-medium tracking-wide border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",readOnly:!0})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"tel",value:F.phone,onChange:e=>R(t=>({...t,phone:e.target.value})),placeholder:"Enter phone number",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir font-medium tracking-wide border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",value:F.company_name,onChange:e=>R(t=>({...t,company_name:e.target.value})),placeholder:"Enter company name",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir font-medium tracking-wide border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})}),(0,s.jsx)("div",{children:(0,s.jsx)("textarea",{value:F.company_address,onChange:e=>R(t=>({...t,company_address:e.target.value})),placeholder:"Enter company address",rows:3,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir font-medium tracking-wide border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent resize-none"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-avenir font-medium tracking-wide text-booking-dark mb-2",children:"Role"}),(0,s.jsxs)("div",{className:"relative role-dropdown-container",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>J(!G),className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir font-medium tracking-wide border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent bg-white text-left flex items-center justify-between",children:[(0,s.jsx)("span",{children:F.client_type||"Select Role"}),(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),G&&(0,s.jsx)("div",{className:"relative z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:["Contractor Company","Insurance Company","Council or Housing Association","Other"].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>{R(t=>({...t,client_type:e})),J(!1)},className:"w-full px-4 py-3 text-left text-sm sm:text-base font-avenir font-medium tracking-wide hover:bg-gray-50 transition-colors ".concat(F.client_type===e?"bg-booking-bg text-booking-teal":"text-booking-dark"),children:e},e))})]})]}),A&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm sm:text-base font-avenir font-medium tracking-wide",children:"Your information has been updated successfully!"})}),(0,s.jsx)("div",{className:"pt-3 sm:pt-4",children:(0,s.jsx)("button",{onClick:K,className:"w-full sm:w-auto bg-booking-teal text-white px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-avenir font-medium tracking-wide rounded-lg sm:rounded-xl hover:bg-opacity-90 transition-all duration-200",children:"Update Information"})})]})})]});default:return null}})()}),T&&I&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("img",{src:"/blue-teal.webp",alt:"Logo",className:"h-6 sm:h-10 w-auto object-contain"}),(0,s.jsx)("h2",{className:"text-xl font-avenir-bold font-bold text-booking-dark",children:"Request Details"})]}),(0,s.jsx)("button",{onClick:()=>{O(!1),W(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-avenir-bold font-semibold text-booking-dark border-b pb-2",children:"Client Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-avenir tracking-wide text-booking-gray mb-1",children:"Full Name"}),(0,s.jsx)("p",{className:"text-sm font-avenir-regular text-booking-dark",children:I.full_name||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-avenir tracking-wide text-booking-gray mb-1",children:"Email"}),(0,s.jsx)("p",{className:"text-sm font-avenir-regular text-booking-dark",children:I.email||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-avenir tracking-wide text-booking-gray mb-1",children:"Company Name"}),(0,s.jsx)("p",{className:"text-sm font-avenir-regular text-booking-dark",children:I.company_name||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-avenir tracking-wide text-booking-gray mb-1",children:"Status"}),(0,s.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-avenir-regular font-medium ".concat("confirmed"===I.status?"bg-green-100 text-green-800":"paid"===I.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:"confirmed"===I.status?"Confirmed":"paid"===I.status?"Paid":"Pending"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-avenir-bold font-semibold text-booking-dark border-b pb-2",children:"Booking Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-avenir tracking-wide text-booking-gray mb-1",children:"Number of People"}),(0,s.jsx)("p",{className:"text-sm font-avenir-regular text-booking-dark",children:I.team_size||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-avenir tracking-wide text-booking-gray mb-1",children:"Nightly Budget (per person)"}),(0,s.jsxs)("p",{className:"text-sm font-avenir-regular text-booking-dark",children:["\xa3",I.budget_per_person_week||"N/A"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-avenir tracking-wide text-booking-gray mb-1",children:"Project Postcode"}),(0,s.jsx)("p",{className:"text-sm font-avenir-regular text-booking-dark",children:I.project_postcode||"N/A"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-avenir-bold font-semibold text-booking-dark border-b pb-2",children:"Booking Dates"}),I.booking_dates&&I.booking_dates.length>0?(0,s.jsx)("div",{className:"space-y-3",children:I.booking_dates.map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-base font-avenir tracking-wide text-booking-gray",children:"Period: "}),(0,s.jsxs)("span",{className:"text-sm font-avenir-regular text-booking-dark",children:[new Date(e.start_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})," - ",new Date(e.end_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-base font-avenir tracking-wide text-booking-gray",children:"Duration: "}),(0,s.jsxs)("span",{className:"text-sm font-avenir-regular text-booking-dark",children:[Math.ceil((new Date(e.end_date).getTime()-new Date(e.start_date).getTime())/864e5)," nights"]})]})]})},e.id))}):(0,s.jsx)("p",{className:"text-sm font-avenir-regular text-booking-gray",children:"No booking dates available"})]})]}),(0,s.jsx)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 rounded-b-2xl",children:(0,s.jsx)("button",{onClick:()=>{O(!1),W(null)},className:"w-full sm:w-auto px-6 py-3 bg-booking-teal text-white rounded-lg font-avenir-regular font-medium hover:bg-opacity-90 transition-all duration-200",children:"Close"})})]})}),(0,s.jsx)(c,{isOpen:H,onClose:()=>{V(!1),U(null)},editingBookingRequestId:Y,onSuccess:()=>{et()}}),X&&(0,s.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.6) 0%, rgba(30, 41, 59, 0.7) 100%)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},className:"jsx-1f2797fbab3799e0 fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsxs)("div",{style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1)",animation:"modalSlideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},className:"jsx-1f2797fbab3799e0 relative bg-white rounded-3xl max-w-[520px] w-full overflow-hidden",children:[(0,s.jsx)("button",{onClick:()=>Z(!1),className:"jsx-1f2797fbab3799e0 absolute top-4 right-4 z-10 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 transition-all duration-200 group",children:(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-1f2797fbab3799e0 w-4 h-4 text-gray-500 group-hover:text-gray-700 transition-colors",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12",className:"jsx-1f2797fbab3799e0"})})}),(0,s.jsxs)("div",{className:"jsx-1f2797fbab3799e0 px-8 pt-6 pb-6 flex flex-col items-center",children:[(0,s.jsx)("div",{style:{background:"linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%)",boxShadow:"0 8px 24px -4px rgba(239, 68, 68, 0.3)"},className:"jsx-1f2797fbab3799e0 relative w-14 h-14 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)("div",{style:{background:"linear-gradient(135deg, #FCA5A5 0%, #F87171 100%)"},className:"jsx-1f2797fbab3799e0 absolute inset-1.5 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,className:"jsx-1f2797fbab3799e0 w-5 h-5 text-white",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1",className:"jsx-1f2797fbab3799e0"})})})}),(0,s.jsx)("p",{className:"jsx-1f2797fbab3799e0 text-gray-900 font-avenir-bold font-bold text-lg leading-relaxed text-center mb-5",children:"Are you sure you want to logout from your account?"}),(0,s.jsxs)("div",{className:"jsx-1f2797fbab3799e0 flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>Z(!1),className:"jsx-1f2797fbab3799e0 px-6 py-2.5 rounded-xl font-avenir font-semibold text-gray-700 text-sm tracking-wide bg-gray-100 hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),(0,s.jsx)("button",{onClick:en,style:{background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",boxShadow:"0 4px 14px -2px rgba(239, 68, 68, 0.4)"},className:"jsx-1f2797fbab3799e0 px-6 py-2.5 rounded-xl font-avenir font-semibold text-white text-sm tracking-wide transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0",children:"Yes, Logout"})]})]})]}),(0,s.jsx)(r(),{id:"1f2797fbab3799e0",children:"@-webkit-keyframes modalSlideIn{from{opacity:0;-webkit-transform:scale(.95)translatey(10px);transform:scale(.95)translatey(10px)}to{opacity:1;-webkit-transform:scale(1)translatey(0);transform:scale(1)translatey(0)}}@-moz-keyframes modalSlideIn{from{opacity:0;-moz-transform:scale(.95)translatey(10px);transform:scale(.95)translatey(10px)}to{opacity:1;-moz-transform:scale(1)translatey(0);transform:scale(1)translatey(0)}}@-o-keyframes modalSlideIn{from{opacity:0;-o-transform:scale(.95)translatey(10px);transform:scale(.95)translatey(10px)}to{opacity:1;-o-transform:scale(1)translatey(0);transform:scale(1)translatey(0)}}@keyframes modalSlideIn{from{opacity:0;-webkit-transform:scale(.95)translatey(10px);-moz-transform:scale(.95)translatey(10px);-o-transform:scale(.95)translatey(10px);transform:scale(.95)translatey(10px)}to{opacity:1;-webkit-transform:scale(1)translatey(0);-moz-transform:scale(1)translatey(0);-o-transform:scale(1)translatey(0);transform:scale(1)translatey(0)}}"})]})]})}},7766:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return l},a:function(){return i}});var s=n(7437),a=n(2265),r=n(5526);let o=(0,a.createContext)({user:null,loading:!0,signOut:async()=>{}}),i=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[n,i]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),[c,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:t}}=await r.supabase.auth.getSession();e&&((null==t?void 0:t.user)?await h(t.user):i(null),d(!1))}catch(t){console.error("Error getting initial session:",t),e&&(i(null),d(!1))}})();let{data:{subscription:t}}=r.supabase.auth.onAuthStateChange(async(t,s)=>{if(e){if(null==s?void 0:s.user){if(u.has(s.user.id)||c||n&&n.id===s.user.id&&n.role&&("contractor"===n.role||"landlord"===n.role)){d(!1);return}n&&n.id===s.user.id&&n.role||await h(s.user)}else i(null),x(new Set);d(!1)}});return()=>{e=!1,t.unsubscribe()}},[]);let h=async e=>{var t,n,s;if(u.has(e.id)){m(!1),d(!1);return}if(!c){if(e&&e.id&&e.email&&e.role&&"authenticated"!==e.role&&"unauthenticated"!==e.role){i({...e,full_name:(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"User",role:e.role}),m(!1),d(!1);return}if(e&&e.id&&e.role&&("contractor"===e.role||"landlord"===e.role)){m(!1),d(!1);return}m(!0),x(t=>new Set(t).add(e.id));try{let t="contractor";e.email&&e.email.includes("landlord")&&(t="landlord");let s={...e,full_name:(null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||"User",role:t,is_active:!0,email_verified:!!e.email_confirmed_at};i(s),m(!1),d(!1);return}catch(t){console.error("Error fetching user profile:",t),i({...e,full_name:(null===(s=e.email)||void 0===s?void 0:s.split("@")[0])||"User",role:"contractor"}),m(!1),d(!1)}finally{m(!1)}}},g=async()=>{await r.supabase.auth.signOut(),i(null),x(new Set)};return(0,s.jsx)(o.Provider,{value:{user:n,loading:l,signOut:g},children:t})}},5526:function(e,t,n){"use strict";n.r(t),n.d(t,{supabase:function(){return s}});let s=(0,n(8439).eI)("https://gtdjjsxtlgzntmuimyai.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0ZGpqc3h0bGd6bnRtdWlteWFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzA3MjEsImV4cCI6MjA3MzU0NjcyMX0.OIU7JU8oxYb6LrRuTbRJGhWtcy6gH7_5JlML23D2sWE")}},function(e){e.O(0,[439,971,117,744],function(){return e(e.s=1118)}),_N_E=e.O()}]);