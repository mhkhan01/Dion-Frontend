(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{146:function(e,t,s){Promise.resolve().then(s.bind(s,6411))},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},5523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=s(7043)._(s(2265)).default.createContext(null)},6411:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(7437),o=s(2265),a=s(7766),n=s(9376),l=s(5526),i=s(3145),d=s(9501),c=s(3590),m=s(7119);let x=m.Ry({propertyName:m.Z_().min(1,"Property name is required"),houseAddress:m.Z_().min(5,"House address must be at least 5 characters"),locality:m.Z_().optional(),city:m.Z_().min(1,"City is required"),county:m.Z_().min(1,"County is required"),country:m.Z_().min(1,"Country is required"),postcode:m.Z_().regex(/^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$/i,"Please enter a valid UK postcode"),propertyType:m.Km(["House","Flat","Apartment","Townhouse","Other"],{required_error:"Please select a property type"}),bedrooms:m.Rx().min(1,"Must have at least 1 bedroom"),beds:m.Rx().min(1,"Must have at least 1 bed"),bedsBreakdown:m.Z_().optional(),bathrooms:m.Rx().min(.5,"Must have at least 0.5 bathrooms"),maxOccupancy:m.Rx().min(1,"Must accommodate at least 1 person"),parkingType:m.Km(["Driveway","Off-Street","Secure Bay","On-Street"]).optional(),photos:m.Yj().refine(e=>!!(e&&e instanceof FileList)&&0!==e.length&&e.length>=5,"Minimum 5 photos are required"),workspaceDesk:m.O7(),highSpeedWifi:m.O7(),smartTv:m.O7(),fullyEquippedKitchen:m.O7(),livingDiningSpace:m.O7(),washingMachine:m.O7(),ironIroningBoard:m.O7(),linenTowelsProvided:m.O7(),consumablesProvided:m.O7(),smokeAlarm:m.O7(),coAlarm:m.O7(),fireExtinguisherBlanket:m.O7(),epc:m.O7(),gasSafetyCertificate:m.O7(),eicr:m.O7(),additionalInfo:m.Z_().optional(),vatDetails:m.Z_().optional(),comments:m.Z_().optional(),airbnb:m.Z_().url().optional().or(m.i0("")),paymentMethod:m.Ry({bankName:m.Z_().optional(),accountNumber:m.Z_().optional(),sortCode:m.Z_().optional(),accountHolderName:m.Z_().optional(),preferredPaymentMethod:m.Km(["bank_transfer","paypal","stripe","other"]).optional()}).optional()});function u(e){let{isOpen:t,onClose:s,onSubmit:a}=e,[n,l]=(0,o.useState)(!1),[m,u]=(0,o.useState)(null),[p,h]=(0,o.useState)(null),{register:g,handleSubmit:b,formState:{errors:f},reset:y,watch:v,setValue:k,trigger:j}=(0,d.cI)({resolver:(0,c.F)(x),defaultValues:{workspaceDesk:!1,highSpeedWifi:!1,smartTv:!1,fullyEquippedKitchen:!1,livingDiningSpace:!1,washingMachine:!1,ironIroningBoard:!1,linenTowelsProvided:!1,consumablesProvided:!1,smokeAlarm:!1,coAlarm:!1,fireExtinguisherBlanket:!1,epc:!1,gasSafetyCertificate:!1,eicr:!1}}),N=async e=>{l(!0),u(null);try{let t={...e,photos:p};await a(t),y(),h(null),s()}catch(e){u("Failed to add property. Please try again.")}finally{l(!1)}},w=()=>{y(),u(null),h(null),s()};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-y-auto sm:max-w-6xl max-w-xs max-h-[85vh] sm:max-h-[95vh]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-6 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"py-1",children:(0,r.jsx)(i.default,{src:"/blue-teal.webp",alt:"Booking Hub Logo",width:200,height:50,className:"h-6 sm:h-24 w-auto object-contain",style:{maxWidth:"100%"}})}),(0,r.jsx)("button",{onClick:w,className:"p-1 sm:p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-6 sm:h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"p-4 sm:p-6",children:(0,r.jsxs)("form",{onSubmit:b(N),className:"space-y-3 sm:space-y-8",children:[m&&(0,r.jsx)("div",{className:"rounded-xl bg-red-50 border border-red-200 p-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:m})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Basic Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"propertyName",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Property Name *"}),(0,r.jsx)("input",{...g("propertyName"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.propertyName?"border-red-500":""),placeholder:"e.g., Modern City Apartment"}),f.propertyName&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.propertyName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"propertyType",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Property Type *"}),(0,r.jsxs)("select",{...g("propertyType"),className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.propertyType?"border-red-500":""),children:[(0,r.jsx)("option",{value:"",children:"Select property type"}),(0,r.jsx)("option",{value:"House",children:"House"}),(0,r.jsx)("option",{value:"Flat",children:"Flat"}),(0,r.jsx)("option",{value:"Apartment",children:"Apartment"}),(0,r.jsx)("option",{value:"Townhouse",children:"Townhouse"}),(0,r.jsx)("option",{value:"Other",children:"Other"})]}),f.propertyType&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.propertyType.message})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"houseAddress",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"House Address *"}),(0,r.jsx)("textarea",{...g("houseAddress"),rows:3,className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.houseAddress?"border-red-500":""),placeholder:"Enter house address"}),f.houseAddress&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.houseAddress.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"locality",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Locality/District"}),(0,r.jsx)("input",{...g("locality"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"e.g., Westminster"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"city",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"City *"}),(0,r.jsx)("input",{...g("city"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.city?"border-red-500":""),placeholder:"e.g., London"}),f.city&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.city.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"county",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"County *"}),(0,r.jsx)("input",{...g("county"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.county?"border-red-500":""),placeholder:"e.g., Greater London"}),f.county&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.county.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"country",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Country *"}),(0,r.jsx)("input",{...g("country"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.country?"border-red-500":""),placeholder:"e.g., United Kingdom"}),f.country&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.country.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"postcode",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Postcode *"}),(0,r.jsx)("input",{...g("postcode"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.postcode?"border-red-500":""),placeholder:"e.g., SW1A 1AA"}),f.postcode&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.postcode.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"bedrooms",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Number of Bedrooms *"}),(0,r.jsx)("input",{...g("bedrooms",{valueAsNumber:!0}),type:"number",min:"1",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.bedrooms?"border-red-500":""),placeholder:"2"}),f.bedrooms&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.bedrooms.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"beds",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Number of Beds *"}),(0,r.jsx)("input",{...g("beds",{valueAsNumber:!0}),type:"number",min:"1",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.beds?"border-red-500":""),placeholder:"2"}),f.beds&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.beds.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"bedsBreakdown",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Beds Breakdown (if multiple types)"}),(0,r.jsx)("input",{...g("bedsBreakdown"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"e.g., 1 double, 2 singles"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"bathrooms",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Number of Bathrooms *"}),(0,r.jsx)("input",{...g("bathrooms",{valueAsNumber:!0}),type:"number",min:"0.5",step:"0.5",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.bathrooms?"border-red-500":""),placeholder:"1.5"}),f.bathrooms&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.bathrooms.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"maxOccupancy",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Maximum Occupancy *"}),(0,r.jsx)("input",{...g("maxOccupancy",{valueAsNumber:!0}),type:"number",min:"1",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base ".concat(f.maxOccupancy?"border-red-500":""),placeholder:"4"}),f.maxOccupancy&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.maxOccupancy.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"parkingType",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Parking Type"}),(0,r.jsxs)("select",{...g("parkingType"),className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",children:[(0,r.jsx)("option",{value:"",children:"Select parking type"}),(0,r.jsx)("option",{value:"Driveway",children:"Driveway"}),(0,r.jsx)("option",{value:"Off-Street",children:"Off-Street"}),(0,r.jsx)("option",{value:"Secure Bay",children:"Secure Bay"}),(0,r.jsx)("option",{value:"On-Street",children:"On-Street"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Photos"}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-booking-gray mb-2 sm:mb-4",children:"Minimum 5 photos required (kitchen, living space, bedrooms, bathrooms, or other key areas). Exterior photos optional but encouraged."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"photos",className:"block text-xs sm:text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Property Photos (Minimum 5 required) *"}),(0,r.jsx)("input",{type:"file",accept:"image/*",id:"photos",multiple:!0,onChange:e=>{let t=e.target.files;if(t){let s=[...p?Array.from(p):[],...Array.from(t)],r=new DataTransfer;s.forEach(e=>r.items.add(e));let o=r.files;h(o),k("photos",o),j("photos"),e.target.value=""}},className:"hidden"}),(0,r.jsxs)("div",{className:"flex gap-2 sm:gap-3 mb-2 sm:mb-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{document.getElementById("photos").click()},className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 sm:py-3 bg-booking-teal text-white rounded-lg hover:bg-opacity-90 transition-all duration-200 font-medium text-xs sm:text-base",children:[(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Photos"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.capture="environment",e.style.display="none",e.multiple=!0,e.onchange=t=>{let s=t.target.files;if(s){let e=[...p?Array.from(p):[],...Array.from(s)],t=new DataTransfer;e.forEach(e=>t.items.add(e));let r=t.files;h(r),k("photos",r),j("photos");let o=document.getElementById("photos");o&&(o.files=r)}document.body.removeChild(e)},document.body.appendChild(e),e.click()},className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 sm:py-3 bg-gray-100 text-booking-dark rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium text-xs sm:text-base",title:"Take photos with camera",children:[(0,r.jsxs)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Take Photos"]})]}),p&&p.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("p",{className:"text-xs sm:text-sm font-medium text-booking-dark",children:["Selected Photos (",p.length,")"]}),(0,r.jsx)("button",{type:"button",onClick:()=>{h(null),k("photos",null),j("photos")},className:"text-sm text-red-600 hover:text-red-800 transition-colors",children:"Clear All"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Array.from(p).map((e,t)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,r.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(t+1),className:"w-full h-full object-cover"})}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=Array.from(p);e.splice(t,1);let s=new DataTransfer;e.forEach(e=>s.items.add(e));let r=s.files;h(r),k("photos",r),j("photos")},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))})]}),f.photos&&(0,r.jsx)("p",{className:"mt-2 text-sm text-red-600",children:String(f.photos.message||"Invalid photos")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Amenities"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4",children:[{key:"workspaceDesk",label:"Workspace / Desk"},{key:"highSpeedWifi",label:"High-Speed Wi-Fi"},{key:"smartTv",label:"Smart TV(s)"},{key:"fullyEquippedKitchen",label:"Fully Equipped Kitchen"},{key:"livingDiningSpace",label:"Living/Dining Space"},{key:"washingMachine",label:"Washing Machine"},{key:"ironIroningBoard",label:"Iron & Ironing Board"},{key:"linenTowelsProvided",label:"Linen & Towels Provided"},{key:"consumablesProvided",label:"Consumables Provided"}].map(e=>{let{key:t,label:s}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 sm:p-4 border border-gray-200 rounded-lg",children:[(0,r.jsx)("label",{htmlFor:t,className:"text-xs sm:text-sm font-medium text-booking-dark",children:s}),(0,r.jsx)("input",{...g(t),type:"checkbox",className:"w-5 h-5 text-booking-teal border-gray-300 rounded focus:ring-booking-teal"})]},t)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Safety & Compliance"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"smokeAlarm",label:"Smoke Alarm"},{key:"coAlarm",label:"CO Alarm"},{key:"fireExtinguisherBlanket",label:"Fire Extinguisher / Fire Blanket"},{key:"epc",label:"EPC"},{key:"gasSafetyCertificate",label:"Gas Safety Certificate"},{key:"eicr",label:"EICR"}].map(e=>{let{key:t,label:s}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 sm:p-4 border border-gray-200 rounded-lg",children:[(0,r.jsx)("label",{htmlFor:t,className:"text-xs sm:text-sm font-medium text-booking-dark",children:s}),(0,r.jsx)("input",{...g(t),type:"checkbox",className:"w-5 h-5 text-booking-teal border-gray-300 rounded focus:ring-booking-teal"})]},t)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Additional Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"additionalInfo",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Additional Information"}),(0,r.jsx)("textarea",{...g("additionalInfo"),rows:4,className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"Add any special features, rules, notes, or other information about the property..."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"VAT Details"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"vatDetails",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"VAT Details"}),(0,r.jsx)("textarea",{...g("vatDetails"),rows:3,className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"Enter VAT details for this property (VAT number, rate, registration status, etc.)..."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Comments / Notes"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"comments",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Property Comments"}),(0,r.jsx)("textarea",{...g("comments"),rows:4,className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"Add any comments, notes, or special instructions for this property..."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Airbnb Reference"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"airbnb",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Airbnb Listing Link (Optional)"}),(0,r.jsx)("input",{...g("airbnb"),type:"url",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"https://www.airbnb.co.uk/rooms/..."}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Optional reference to existing Airbnb listing"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-xl font-bold text-booking-dark mb-2 sm:mb-6",children:"Payout Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"paymentMethod.preferredPaymentMethod",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Preferred Payment Method"}),(0,r.jsxs)("select",{...g("paymentMethod.preferredPaymentMethod"),className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",children:[(0,r.jsx)("option",{value:"",children:"Select payment method"}),(0,r.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,r.jsx)("option",{value:"paypal",children:"PayPal"}),(0,r.jsx)("option",{value:"stripe",children:"Stripe"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"paymentMethod.bankName",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Bank Name"}),(0,r.jsx)("input",{...g("paymentMethod.bankName"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"e.g., Barclays, HSBC"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"paymentMethod.accountHolderName",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Account Holder Name"}),(0,r.jsx)("input",{...g("paymentMethod.accountHolderName"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"Full name on account"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"paymentMethod.sortCode",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Sort Code"}),(0,r.jsx)("input",{...g("paymentMethod.sortCode"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"12-34-56"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"paymentMethod.accountNumber",className:"block text-xs sm:text-sm font-medium text-booking-dark mb-1 sm:mb-2",children:"Account Number"}),(0,r.jsx)("input",{...g("paymentMethod.accountNumber"),type:"text",className:"w-full px-2 sm:px-4 py-2 sm:py-3 border border-booking-teal rounded focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent text-xs sm:text-base",placeholder:"12345678"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 pt-3 sm:pt-6 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:w,className:"flex-1 bg-gray-100 text-booking-dark font-medium py-2 sm:py-3 px-3 sm:px-6 rounded hover:bg-gray-200 transition-all duration-200 text-xs sm:text-base",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:n,className:"flex-1 bg-booking-teal text-white font-bold py-2 sm:py-3 px-3 sm:px-6 rounded hover:bg-opacity-90 transition-all duration-200 text-xs sm:text-base",children:n?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Adding Property..."]}):"Add Property"})]})]})})]})}):null}function p(e){let{isOpen:t,onClose:s,property:a,onPropertyUpdate:n}=e,[d,c]=(0,o.useState)(0),[m,x]=(0,o.useState)(!1),[u,p]=(0,o.useState)(null),[h,g]=(0,o.useState)(!1),[b,f]=(0,o.useState)(!1);if(!t||!a)return null;let y=(e,t)=>{u&&p({...u,[e]:t})},v=async()=>{if(u){g(!0);try{console.log("Attempting to update property with data:",{id:u.id,city:u.city,country:u.country,locality:u.locality,county:u.county});let{data:e,error:t}=await l.supabase.from("properties").update({property_name:u.property_name,house_address:u.house_address,locality:u.locality||null,city:u.city||"",county:u.county||null,country:u.country||"",postcode:u.postcode,property_type:u.property_type,bedrooms:u.bedrooms,beds:u.beds,beds_breakdown:u.beds_breakdown,bathrooms:u.bathrooms,max_occupancy:u.max_occupancy,parking_type:u.parking_type,workspace_desk:u.workspace_desk,high_speed_wifi:u.high_speed_wifi,smart_tv:u.smart_tv,fully_equipped_kitchen:u.fully_equipped_kitchen,living_dining_space:u.living_dining_space,washing_machine:u.washing_machine,iron_ironing_board:u.iron_ironing_board,linen_towels_provided:u.linen_towels_provided,consumables_provided:u.consumables_provided,smoke_alarm:u.smoke_alarm,co_alarm:u.co_alarm,fire_extinguisher_blanket:u.fire_extinguisher_blanket,epc:u.epc,gas_safety_certificate:u.gas_safety_certificate,eicr:u.eicr,additional_info:u.additional_info,is_available:u.is_available,updated_at:new Date().toISOString()}).eq("id",u.id).select().single();if(t){console.error("Error updating property:",t),console.error("Error details:",JSON.stringify(t,null,2)),alert("Failed to update property: ".concat(t.message||"Please try again."));return}f(!0),e&&p(e),x(!1),setTimeout(()=>f(!1),3e3),n&&n()}catch(e){console.error("Error updating property:",e),alert("Failed to update property. Please try again.")}finally{g(!1)}}},k=u||a,j=()=>{c(0),x(!1),p(null),f(!1),s()};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-y-auto sm:max-w-6xl max-w-xs max-h-[70vh] sm:max-h-[95vh]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"py-1",children:(0,r.jsx)(i.default,{src:"/blue-teal.webp",alt:"Booking Hub Logo",width:120,height:30,className:"h-6 sm:h-12 w-auto object-contain",style:{maxWidth:"100%"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xs sm:text-xl font-avenir-bold font-bold text-booking-dark",children:k.property_name}),(0,r.jsx)("p",{className:"text-[10px] sm:text-sm font-avenir-regular text-booking-gray",children:k.property_type})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[!m&&(0,r.jsxs)("button",{onClick:()=>{p({...a,city:a.city||"",country:a.country||"",locality:a.locality||"",county:a.county||""}),x(!0)},className:"px-3 sm:px-4 py-1 sm:py-2 bg-booking-teal text-white text-xs sm:text-sm font-avenir-regular font-medium rounded-lg hover:bg-opacity-90 transition-all duration-200 flex items-center space-x-1 sm:space-x-2",children:[(0,r.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,r.jsx)("span",{children:"Edit"})]}),(0,r.jsx)("button",{onClick:j,className:"p-1 sm:p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-6 sm:h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-3 sm:space-y-8",children:[a.photos&&a.photos.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-avenir-bold font-semibold text-booking-dark mb-2 sm:mb-4",children:"Property Photos"}),(0,r.jsxs)("div",{className:"relative max-w-[200px] sm:max-w-md mx-auto",children:[(0,r.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,r.jsx)("img",{src:a.photos[d],alt:"Property photo ".concat(d+1),className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})}),a.photos.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>c(e=>0===e?a.photos.length-1:e-1),className:"absolute left-1 sm:left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 sm:w-10 sm:h-10 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-all duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("button",{onClick:()=>c(e=>e===a.photos.length-1?0:e+1),className:"absolute right-1 sm:right-4 top-1/2 transform -translate-y-1/2 w-6 h-6 sm:w-10 sm:h-10 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-all duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.photos.length>1&&(0,r.jsxs)("div",{className:"absolute bottom-1 sm:bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-1 sm:px-3 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-sm",children:[d+1," / ",a.photos.length]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-avenir-bold font-semibold text-booking-dark mb-2 sm:mb-4",children:"Basic Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Property Name"}),m?(0,r.jsx)("input",{type:"text",value:k.property_name,onChange:e=>y("property_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal"}):(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:k.property_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Property Type"}),m?(0,r.jsxs)("select",{value:k.property_type,onChange:e=>y("property_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",children:[(0,r.jsx)("option",{value:"House",children:"House"}),(0,r.jsx)("option",{value:"Apartment",children:"Apartment"}),(0,r.jsx)("option",{value:"Studio",children:"Studio"}),(0,r.jsx)("option",{value:"Villa",children:"Villa"}),(0,r.jsx)("option",{value:"Cottage",children:"Cottage"})]}):(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:k.property_type})]}),m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"House Address"}),(0,r.jsx)("textarea",{value:k.house_address,onChange:e=>y("house_address",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"Enter house address"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Locality/District"}),(0,r.jsx)("input",{type:"text",value:k.locality||"",onChange:e=>y("locality",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"e.g., Westminster"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"City"}),(0,r.jsx)("input",{type:"text",value:k.city,onChange:e=>y("city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"e.g., London"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"County"}),(0,r.jsx)("input",{type:"text",value:k.county||"",onChange:e=>y("county",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"e.g., Greater London"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Country"}),(0,r.jsx)("input",{type:"text",value:k.country,onChange:e=>y("country",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"e.g., United Kingdom"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Postcode"}),(0,r.jsx)("input",{type:"text",value:k.postcode,onChange:e=>y("postcode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"e.g., SW1A 1AA"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Full Address"}),(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:[k.house_address,k.locality,k.city,k.county,k.country].filter(e=>e&&""!==e.trim()).join(", ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Postcode"}),(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:k.postcode})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Parking Type"}),m?(0,r.jsx)("input",{type:"text",value:k.parking_type||"",onChange:e=>y("parking_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"e.g., Street parking, Garage"}):(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:k.parking_type||"Not specified"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-avenir-bold font-semibold text-booking-dark mb-2 sm:mb-4",children:"Property Specifications"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6",children:[(0,r.jsxs)("div",{className:"text-center p-2 sm:p-4 bg-gray-50 rounded-lg",children:[m?(0,r.jsx)("input",{type:"number",value:k.bedrooms,onChange:e=>y("bedrooms",parseInt(e.target.value)||0),className:"w-full text-center text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal bg-transparent border-b-2 border-booking-teal focus:outline-none",min:"0"}):(0,r.jsx)("div",{className:"text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal",children:k.bedrooms}),(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir-regular text-booking-gray",children:"Bedrooms"})]}),(0,r.jsxs)("div",{className:"text-center p-2 sm:p-4 bg-gray-50 rounded-lg",children:[m?(0,r.jsx)("input",{type:"number",value:k.beds,onChange:e=>y("beds",parseInt(e.target.value)||0),className:"w-full text-center text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal bg-transparent border-b-2 border-booking-teal focus:outline-none",min:"0"}):(0,r.jsx)("div",{className:"text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal",children:k.beds}),(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir-regular text-booking-gray",children:"Beds"})]}),(0,r.jsxs)("div",{className:"text-center p-2 sm:p-4 bg-gray-50 rounded-lg",children:[m?(0,r.jsx)("input",{type:"number",value:k.bathrooms,onChange:e=>y("bathrooms",parseInt(e.target.value)||0),className:"w-full text-center text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal bg-transparent border-b-2 border-booking-teal focus:outline-none",min:"0"}):(0,r.jsx)("div",{className:"text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal",children:k.bathrooms}),(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir-regular text-booking-gray",children:"Bathrooms"})]}),(0,r.jsxs)("div",{className:"text-center p-2 sm:p-4 bg-gray-50 rounded-lg",children:[m?(0,r.jsx)("input",{type:"number",value:k.max_occupancy,onChange:e=>y("max_occupancy",parseInt(e.target.value)||0),className:"w-full text-center text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal bg-transparent border-b-2 border-booking-teal focus:outline-none",min:"0"}):(0,r.jsx)("div",{className:"text-lg sm:text-2xl font-avenir-regular font-bold text-booking-teal",children:k.max_occupancy}),(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir-regular text-booking-gray",children:"Max Occupancy"})]})]}),(k.beds_breakdown||m)&&(0,r.jsxs)("div",{className:"mt-2 sm:mt-4",children:[(0,r.jsx)("label",{className:"block text-xs sm:text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Beds Breakdown"}),m?(0,r.jsx)("input",{type:"text",value:k.beds_breakdown||"",onChange:e=>y("beds_breakdown",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",placeholder:"e.g., 2 Queen beds, 1 Single bed"}):(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:k.beds_breakdown})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-avenir-bold font-semibold text-booking-dark mb-2 sm:mb-4",children:"Amenities"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3",children:[{key:"workspace_desk",label:"Workspace / Desk"},{key:"high_speed_wifi",label:"High-Speed Wi-Fi"},{key:"smart_tv",label:"Smart TV(s)"},{key:"fully_equipped_kitchen",label:"Fully Equipped Kitchen"},{key:"living_dining_space",label:"Living/Dining Space"},{key:"washing_machine",label:"Washing Machine"},{key:"iron_ironing_board",label:"Iron & Ironing Board"},{key:"linen_towels_provided",label:"Linen & Towels Provided"},{key:"consumables_provided",label:"Consumables Provided"}].map(e=>{let{key:t,label:s}=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 rounded-lg ".concat(m?"cursor-pointer hover:bg-gray-100":""),onClick:()=>m&&y(t,!k[t]),children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(k[t]?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:k[t]?(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,r.jsx)("span",{className:"text-xs sm:text-sm font-avenir-regular font-medium ".concat(k[t]?"text-booking-dark":"text-booking-gray"),children:s})]},t)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-avenir-bold font-semibold text-booking-dark mb-2 sm:mb-4",children:"Safety & Compliance"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3",children:[{key:"smoke_alarm",label:"Smoke Alarm"},{key:"co_alarm",label:"CO Alarm"},{key:"fire_extinguisher_blanket",label:"Fire Extinguisher / Fire Blanket"},{key:"epc",label:"EPC"},{key:"gas_safety_certificate",label:"Gas Safety Certificate"},{key:"eicr",label:"EICR"}].map(e=>{let{key:t,label:s}=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gray-50 rounded-lg ".concat(m?"cursor-pointer hover:bg-gray-100":""),onClick:()=>m&&y(t,!k[t]),children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(k[t]?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:k[t]?(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,r.jsx)("span",{className:"text-xs sm:text-sm font-avenir-regular font-medium ".concat(k[t]?"text-booking-dark":"text-booking-gray"),children:s})]},t)})})]}),(k.additional_info||m)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-avenir-bold font-semibold text-booking-dark mb-2 sm:mb-4",children:"Additional Information"}),(0,r.jsx)("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg",children:m?(0,r.jsx)("textarea",{value:k.additional_info||"",onChange:e=>y("additional_info",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal min-h-[100px]",placeholder:"Enter any additional information about the property..."}):(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark",children:k.additional_info})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-avenir-bold font-semibold text-booking-dark mb-2 sm:mb-4",children:"Status & Metadata"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Status"}),m?(0,r.jsxs)("select",{value:k.is_available?"available":"unavailable",onChange:e=>y("is_available","available"===e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-xs sm:text-base font-avenir-regular focus:outline-none focus:ring-2 focus:ring-booking-teal",children:[(0,r.jsx)("option",{value:"available",children:"Available"}),(0,r.jsx)("option",{value:"unavailable",children:"Unavailable"})]}):(0,r.jsx)("span",{className:"inline-flex px-3 py-1 rounded-full text-xs sm:text-sm font-avenir-regular font-medium ".concat(k.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:k.is_available?"Available":"Unavailable"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Created"}),(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:new Date(k.created_at).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-avenir-bold font-medium text-booking-gray mb-1",children:"Last Updated"}),(0,r.jsx)("p",{className:"text-xs sm:text-base font-avenir-regular text-booking-dark font-medium",children:new Date(k.updated_at).toLocaleDateString()})]})]})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200",children:[b&&(0,r.jsx)("div",{className:"px-6 pt-4",children:(0,r.jsx)("div",{className:"rounded-xl bg-green-50 border border-green-200 p-3 sm:p-4",children:(0,r.jsx)("div",{className:"text-xs sm:text-sm text-green-800",children:"Property details updated successfully"})})}),(0,r.jsx)("div",{className:"flex justify-end space-x-3 p-6",children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{x(!1),p(null),f(!1)},disabled:h,className:"px-6 py-3 bg-gray-200 text-gray-700 font-avenir-regular font-medium rounded-lg hover:bg-gray-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,r.jsx)("button",{onClick:v,disabled:h,className:"px-6 py-3 bg-booking-teal text-white font-avenir-regular font-medium rounded-lg hover:bg-opacity-90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Saving..."})]}):(0,r.jsx)("span",{children:"Save Changes"})})]}):(0,r.jsx)("button",{onClick:j,className:"px-6 py-3 bg-booking-teal text-white font-avenir-regular font-medium rounded-lg hover:bg-opacity-90 transition-all duration-200",children:"Close"})})]})]})})}function h(){let{user:e,loading:t,signOut:s}=(0,a.a)(),i=(0,n.useRouter)(),[d,c]=(0,o.useState)([]),[m,x]=(0,o.useState)([]),[h,g]=(0,o.useState)(!0),[b,f]=(0,o.useState)("dashboard"),[y,v]=(0,o.useState)(""),[k,j]=(0,o.useState)(!1),[N,w]=(0,o.useState)(!1),[_,C]=(0,o.useState)(null),[L,S]=(0,o.useState)("listed"),[A,M]=(0,o.useState)("listed"),[P,B]=(0,o.useState)(""),[E,W]=(0,o.useState)(new Set(["search"])),[F,T]=(0,o.useState)({search:"",postcode:"",property_type:""}),[O,D]=(0,o.useState)(!1),[I,H]=(0,o.useState)(!1),[z,q]=(0,o.useState)(null),[R,V]=(0,o.useState)({company_name:"",company_email:"",company_address:"",phone:""}),[Z,U]=(0,o.useState)(""),[G,K]=(0,o.useState)(!1),[J,Y]=(0,o.useState)(!1),[X,Q]=(0,o.useState)(null),[$,ee]=(0,o.useState)(!1),[et,es]=(0,o.useState)([]),[er,eo]=(0,o.useState)(!1);(0,o.useEffect)(()=>{},[e,t,i]),(0,o.useEffect)(()=>{e?ea():g(!1)},[e]),(0,o.useEffect)(()=>{"contact-info"===b&&e&&!G&&(ed(),K(!0)),"contact-info"!==b&&K(!1)},[b,e,G]),(0,o.useEffect)(()=>{(null==e?void 0:e.full_name)&&!Z&&U(e.full_name)},[null==e?void 0:e.full_name,Z]),(0,o.useEffect)(()=>{let e=e=>{z&&!e.target.closest(".relative")&&q(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[z]),(0,o.useEffect)(()=>{let e=e=>{O&&!e.target.closest(".filter-dropdown-container")&&D(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[O]);let ea=async()=>{try{g(!0);let{data:t,error:s}=await l.supabase.from("landlord").select("id, full_name").eq("id",null==e?void 0:e.id).single();if(s){console.error("Error fetching partner profile:",s),g(!1);return}(null==t?void 0:t.full_name)&&v(t.full_name);let{data:r,error:o}=await l.supabase.from("properties").select("*").eq("landlord_id",t.id).order("created_at",{ascending:!1});o?console.error("Error fetching properties:",o):c(r||[]),x([])}catch(e){console.error("Error fetching data:",e)}finally{g(!1)}},en=async()=>{e&&await s(),i.push("/")},el=async e=>{if(confirm("Are you sure you want to delete this property?"))try{let{error:t}=await l.supabase.from("properties").delete().eq("id",e);t?console.error("Error deleting property:",t):c(d.filter(t=>t.id!==e))}catch(e){console.error("Error deleting property:",e)}},ei=async(e,t)=>{try{let s="active"===t?"inactive":"active",{error:r}=await l.supabase.from("properties").update({activity:s}).eq("id",e);r?console.error("Error updating property status:",r):c(d.map(t=>t.id===e?{...t,activity:s}:t))}catch(e){console.error("Error updating property status:",e)}},ed=async()=>{if(null==e?void 0:e.id)try{let{data:t,error:s}=await l.supabase.from("landlord").select("full_name, company_name, company_email, company_address, phone").eq("id",e.id).single();s?console.error("Error fetching partner data:",s):t?(U(t.full_name||(null==e?void 0:e.full_name)||""),V({company_name:t.company_name||"",company_email:t.company_email||"",company_address:t.company_address||"",phone:t.phone||""})):(U((null==e?void 0:e.full_name)||""),V({company_name:"",company_email:"",company_address:"",phone:""}))}catch(e){console.error("Error fetching partner data:",e)}},ec=async()=>{if(null==e?void 0:e.id){Y(!1),Q(null);try{let t;let{data:s,error:r}=await l.supabase.from("landlord").select("id").eq("id",e.id).single();(t=s?await l.supabase.from("landlord").update({company_name:R.company_name,company_email:R.company_email,company_address:R.company_address,phone:R.phone}).eq("id",e.id):await l.supabase.from("landlord").insert({id:e.id,email:e.email||"",full_name:Z||e.full_name||"",role:"landlord",company_name:R.company_name,company_email:R.company_email,company_address:R.company_address,phone:R.phone})).error?(console.error("Error updating partner data:",t.error),Q("Failed to update information: ".concat(t.error.message))):(Y(!0),setTimeout(()=>Y(!1),3e3))}catch(e){console.error("Error updating partner data:",e),Q("An unexpected error occurred while updating your information.")}}},em=e=>{C(e),w(!0)},ex=async()=>{if(null==e?void 0:e.id)try{eo(!0);let{data:t,error:s}=await l.supabase.from("landlord").select("id").eq("id",e.id).single();if(s){console.error("Error fetching landlord profile:",s),es([]);return}let{data:r,error:o}=await l.supabase.from("booked_properties").select("\n          *,\n          value,\n          properties (\n            id,\n            property_name,\n            house_address,\n            locality,\n            city,\n            county,\n            postcode,\n            country\n          ),\n          booking_requests (\n            city\n          )\n        ").eq("landlord_id",t.id).in("status",["active","completed"]).order("created_at",{ascending:!1});o?(console.error("Error fetching confirmed bookings:",o),es([])):es(r||[])}catch(e){console.error("Error fetching confirmed bookings:",e),es([])}finally{eo(!1)}},eu=async()=>{await ex(),ee(!0)},ep=()=>{ee(!1)},eh=async t=>{try{let s=[];if(t.photos&&t.photos.length>0)for(let r=0;r<t.photos.length;r++){let o=t.photos[r],a="".concat(null==e?void 0:e.id,"/").concat(Date.now(),"-").concat(r,".").concat(o.name.split(".").pop()),{data:n,error:i}=await l.supabase.storage.from("property-photos").upload(a,o);if(i)console.error("Error uploading photo:",i);else{let{data:{publicUrl:e}}=l.supabase.storage.from("property-photos").getPublicUrl(a);s.push(e)}}let{data:r,error:o}=await l.supabase.from("properties").insert({landlord_id:null==e?void 0:e.id,property_name:t.propertyName,house_address:t.houseAddress,locality:t.locality||null,city:t.city,county:t.county,country:t.country,postcode:t.postcode,property_type:t.propertyType,bedrooms:t.bedrooms,beds:t.beds,beds_breakdown:t.bedsBreakdown||null,bathrooms:t.bathrooms,max_occupancy:t.maxOccupancy,parking_type:t.parkingType||null,photos:s,workspace_desk:t.workspaceDesk,high_speed_wifi:t.highSpeedWifi,smart_tv:t.smartTv,fully_equipped_kitchen:t.fullyEquippedKitchen,living_dining_space:t.livingDiningSpace,washing_machine:t.washingMachine,iron_ironing_board:t.ironIroningBoard,linen_towels_provided:t.linenTowelsProvided,consumables_provided:t.consumablesProvided,smoke_alarm:t.smokeAlarm,co_alarm:t.coAlarm,fire_extinguisher_blanket:t.fireExtinguisherBlanket,epc:t.epc,gas_safety_certificate:t.gasSafetyCertificate,eicr:t.eicr,additional_info:t.additionalInfo||null,weekly_rate:null,monthly_rate:null,bills_included:!1,is_available:!0,activity:"active"}).select().single();if(o)throw console.error("Error adding property:",o),o;c([r,...d]),f("dashboard")}catch(e){throw console.error("Error adding property:",e),e}};if(t)return(0,r.jsx)("div",{className:"min-h-screen bg-booking-bg",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-booking-teal"})})});let eg=e=>[e.house_address,e.locality,e.city,e.county,e.country].filter(e=>e&&""!==e.trim()).join(", "),eb=e=>e.filter(e=>{if(E.has("search")&&F.search){let t=F.search.toLowerCase();if(!(e.property_name.toLowerCase().includes(t)||e.house_address.toLowerCase().includes(t)||e.postcode.toLowerCase().includes(t)||e.property_type.toLowerCase().includes(t)))return!1}if(E.has("postcode")&&F.postcode){let t=F.postcode.toLowerCase();if(!(e.postcode.toLowerCase().includes(t)||e.house_address.toLowerCase().includes(t)))return!1}return!E.has("property_type")||!F.property_type||e.property_type===F.property_type}),ef=eb(d.filter(e=>"active"===e.activity)),ey=eb(d.filter(e=>"inactive"===e.activity));return m.filter(e=>"pending"===e.status),m.filter(e=>"confirmed"===e.status),(0,r.jsxs)("div",{className:"h-screen bg-gray-50 flex flex-col lg:flex-row overflow-hidden",children:[(0,r.jsxs)("div",{className:"lg:hidden bg-booking-dark text-white p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("img",{src:"/white-teal.webp",alt:"Booking Hub Logo",className:"h-8 w-auto object-contain py-1",style:{maxWidth:"100%"}}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-xl font-avenir tracking-wide font-bold text-white",children:"Partner Portal"})})]}),(0,r.jsx)("button",{onClick:()=>H(!I),className:"p-2 rounded-lg hover:bg-gray-700 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),I&&(0,r.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>H(!1)}),(0,r.jsxs)("div",{className:"fixed top-0 left-0 h-full w-64 bg-booking-dark text-white transform transition-transform duration-300 ease-in-out",children:[(0,r.jsx)("div",{className:"p-4 bg-booking-dark",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2 py-2",children:[(0,r.jsx)("img",{src:"/white-teal.webp",alt:"Booking Hub Logo",className:"h-12 w-auto object-contain",style:{maxWidth:"100%"}}),(0,r.jsx)("p",{className:"text-lg font-avenir tracking-wide font-bold text-white",children:"Partner Portal"})]}),(0,r.jsx)("button",{onClick:()=>H(!1),className:"p-2 rounded-lg hover:bg-gray-700 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("nav",{className:"p-4 space-y-2 font-avenir tracking-wide",children:[(0,r.jsx)("button",{onClick:()=>{f("dashboard"),H(!1)},className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("dashboard"===b?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),(0,r.jsx)("span",{className:"text-sm font-avenir font-medium tracking-wide",children:"Dashboard"}),"dashboard"===b&&(0,r.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,r.jsx)("button",{onClick:()=>{f("my-properties"),H(!1)},className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("my-properties"===b?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,r.jsx)("span",{className:"text-sm font-avenir font-medium tracking-wide",children:"My Properties"}),"my-properties"===b&&(0,r.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,r.jsx)("button",{onClick:()=>{f("contact-info"),H(!1)},className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("contact-info"===b?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,r.jsx)("span",{className:"text-sm font-avenir font-medium tracking-wide",children:"Contact Information"}),"contact-info"===b&&(0,r.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})})]}),(0,r.jsxs)("div",{className:"p-4 mt-auto",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-booking-teal rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-semibold text-sm",children:y?y.charAt(0).toUpperCase():"P"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-avenir font-medium tracking-wide text-white",children:y||"Partner"}),(0,r.jsx)("p",{className:"text-xs font-avenir tracking-wide text-gray-300",children:"Partner"})]})]}),(0,r.jsx)("button",{onClick:()=>{en(),H(!1)},className:"w-full px-4 py-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,r.jsx)("span",{className:"text-sm font-avenir font-medium tracking-wide",children:"Logout"})]})})]})]})]}),(0,r.jsxs)("div",{className:"hidden lg:flex w-64 bg-booking-dark text-white flex-col h-screen flex-shrink-0 overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 bg-booking-dark",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2 py-2",children:[(0,r.jsx)("img",{src:"/white-teal.webp",alt:"Booking Hub Logo",className:"h-12 w-auto object-contain",style:{maxWidth:"100%"}}),(0,r.jsx)("p",{className:"text-lg font-avenir tracking-wide font-bold text-white",children:"Partner Portal"})]})}),(0,r.jsxs)("nav",{className:"flex-1 p-4 space-y-2 font-avenir tracking-wide",children:[(0,r.jsx)("button",{onClick:()=>f("dashboard"),className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("dashboard"===b?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),(0,r.jsx)("span",{className:"text-sm lg:text-base font-medium",children:"Dashboard"}),"dashboard"===b&&(0,r.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,r.jsx)("button",{onClick:()=>f("my-properties"),className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("my-properties"===b?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,r.jsx)("span",{className:"text-sm lg:text-base font-medium",children:"My Properties"}),"my-properties"===b&&(0,r.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})}),(0,r.jsx)("button",{onClick:()=>f("contact-info"),className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat("contact-info"===b?"bg-white text-booking-dark":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,r.jsx)("span",{className:"text-sm lg:text-base font-medium",children:"Contact Information"}),"contact-info"===b&&(0,r.jsx)("div",{className:"w-1 h-1 bg-booking-teal rounded-full ml-auto"})]})})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-booking-teal rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-semibold text-sm",children:y?y.charAt(0).toUpperCase():"P"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm lg:text-base font-avenir font-medium tracking-wide text-white",children:y||"Partner"}),(0,r.jsx)("p",{className:"text-xs lg:text-sm font-avenir tracking-wide text-gray-300",children:"Partner"})]})]}),(0,r.jsx)("button",{onClick:en,className:"w-full px-4 py-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,r.jsx)("span",{className:"text-sm lg:text-base font-avenir font-medium tracking-wide",children:"Logout"})]})})]})]}),(0,r.jsx)("div",{className:"flex-1 p-4 lg:p-8 overflow-y-auto overflow-x-hidden",children:(()=>{if($)return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("button",{onClick:ep,className:"flex items-center text-booking-teal hover:text-booking-dark transition-colors duration-200",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-booking-dark mb-2",children:"Confirmed Bookings"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-booking-gray",children:"View all confirmed bookings for your properties"})]}),er?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-booking-teal"})}):et.length>0?(0,r.jsx)("div",{className:"space-y-4",children:et.map(e=>{var t,s,o,a,n,l,i,d;return(0,r.jsx)("div",{className:"bg-white border border-booking-teal sm:border-2 rounded-lg sm:rounded-xl p-1 sm:p-2 shadow-sm hover:shadow-md transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-1 sm:gap-4",children:[(0,r.jsx)("div",{className:"p-1 sm:p-4",children:(0,r.jsxs)("div",{className:"m-1 sm:m-0",children:[(0,r.jsx)("div",{className:"text-[6px] sm:text-xs font-medium text-booking-gray uppercase mb-0.5 sm:mb-2",children:"Property ID"}),(0,r.jsx)("div",{className:"text-[9px] sm:text-2xl font-bold text-booking-dark mb-0.5 sm:mb-1",children:e.property_id||"N/A"}),(0,r.jsx)("div",{className:"text-[6px] sm:text-sm text-booking-gray",children:(null===(t=e.properties)||void 0===t?void 0:t.property_name)||e.property_name||"Property Name N/A"}),(0,r.jsx)("div",{className:"mt-0.5 sm:mt-2 text-[5px] sm:text-xs text-booking-gray",children:[null===(s=e.properties)||void 0===s?void 0:s.house_address,null===(o=e.properties)||void 0===o?void 0:o.locality,null===(a=e.properties)||void 0===a?void 0:a.city,null===(n=e.properties)||void 0===n?void 0:n.county,null===(l=e.properties)||void 0===l?void 0:l.postcode,null===(i=e.properties)||void 0===i?void 0:i.country].filter(Boolean).join(", ")})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg sm:rounded-xl p-1 sm:p-4",children:(0,r.jsxs)("div",{className:"m-1 sm:m-0",children:[(0,r.jsx)("div",{className:"text-[6px] sm:text-xs font-medium text-blue-700 uppercase mb-0.5 sm:mb-2",children:"Booking Period"}),(0,r.jsxs)("div",{className:"space-y-0.5 sm:space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-0.5 sm:space-x-2",children:[(0,r.jsx)("div",{className:"bg-green-500 text-white text-[5px] sm:text-xs font-bold w-8 sm:w-auto px-0.5 sm:px-2 py-0.5 sm:py-1 rounded flex items-center justify-center",children:"START"}),(0,r.jsx)("div",{className:"text-[6px] sm:text-lg font-bold text-gray-900",children:e.start_date?new Date(e.start_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-0.5 sm:space-x-2",children:[(0,r.jsx)("div",{className:"bg-red-500 text-white text-[5px] sm:text-xs font-bold w-8 sm:w-auto px-0.5 sm:px-2 py-0.5 sm:py-1 rounded flex items-center justify-center",children:"END"}),(0,r.jsx)("div",{className:"text-[6px] sm:text-lg font-bold text-gray-900",children:e.end_date?new Date(e.end_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"})]}),e.start_date&&e.end_date&&(0,r.jsxs)("div",{className:"mt-0.5 sm:mt-3 text-center",children:[(0,r.jsx)("div",{className:"text-[5px] sm:text-xs font-medium text-gray-600 uppercase mb-0.5 sm:mb-1",children:"Number of Nights"}),(0,r.jsx)("div",{className:"text-[6px] sm:text-lg font-bold text-gray-900",children:Math.round((new Date(e.end_date).getTime()-new Date(e.start_date).getTime())/864e5)})]}),void 0!==e.value&&null!==e.value&&(0,r.jsxs)("div",{className:"mt-0.5 sm:mt-3 text-center",children:[(0,r.jsx)("div",{className:"text-[5px] sm:text-xs font-medium text-gray-600 uppercase mb-0.5 sm:mb-1",children:"Booking value"}),(0,r.jsx)("div",{className:"text-[6px] sm:text-lg font-bold text-gray-900",children:"number"==typeof e.value?"\xa3".concat(e.value.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})):"\xa3".concat(String(e.value))})]})]})]})}),(0,r.jsx)("div",{className:"p-1 sm:p-4",children:(0,r.jsxs)("div",{className:"m-1 sm:m-0",children:[(0,r.jsx)("div",{className:"text-[6px] sm:text-xs font-medium text-purple-700 uppercase mb-0.5 sm:mb-2",children:"Booking ID"}),(0,r.jsx)("div",{className:"text-[9px] sm:text-2xl font-bold text-booking-dark mb-0.5 sm:mb-2",children:e.booking_id||e.id||"N/A"}),e.project_postcode&&(0,r.jsxs)("div",{className:"text-[6px] sm:text-sm text-booking-gray",children:["Postcode: ",e.project_postcode]}),(null===(d=e.booking_requests)||void 0===d?void 0:d.city)&&(0,r.jsxs)("div",{className:"text-[6px] sm:text-sm text-booking-gray",children:["City: ",e.booking_requests.city]})]})})]})},e.id)})}):(0,r.jsxs)("div",{className:"bg-white rounded-xl lg:rounded-2xl p-8 lg:p-12 text-center shadow-lg border border-gray-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 lg:w-16 lg:h-16 bg-booking-bg rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 lg:w-8 lg:h-8 text-booking-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("h3",{className:"text-base lg:text-lg font-semibold text-booking-dark mb-2 font-sans",children:"No Confirmed Bookings"}),(0,r.jsx)("p",{className:"text-sm lg:text-base text-booking-gray font-sans",children:"You don't have any confirmed bookings at the moment."})]})]});switch(b){case"dashboard":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-avenir-bold font-bold text-booking-dark",children:"Analytics"}),(0,r.jsx)("p",{className:"text-sm sm:text-base font-avenir font-medium tracking-wide text-booking-gray",children:"Property listing overview"})]}),(0,r.jsx)("div",{className:"p-1",children:(0,r.jsx)("button",{onClick:eu,className:"px-3 py-2 sm:px-6 sm:py-3 text-xs sm:text-base font-avenir font-medium tracking-wide text-white rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",style:{background:"linear-gradient(135deg, #00BAB5 0%, #0B1D37 100%)",borderRadius:"0.5rem"},children:"Confirmed Bookings"})})]}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:(0,r.jsx)("button",{onClick:()=>f("add-property"),className:"w-full sm:w-auto text-white px-6 py-3 sm:px-8 sm:py-4 lg:px-10 lg:py-5 rounded-lg transition-all duration-200 font-avenir font-medium tracking-wide font-bold text-base sm:text-lg lg:text-xl shadow-lg hover:shadow-xl transform hover:scale-105 whitespace-nowrap",style:{background:"linear-gradient(to right, #00BAB5, rgba(0, 186, 181, 0.54))"},children:"Add New Property"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-2 gap-3 sm:gap-4 lg:gap-6 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"rounded-xl sm:rounded-2xl p-3 sm:p-4 lg:p-6 text-white",style:{background:"linear-gradient(to top, #00BAB5, rgba(0, 186, 181, 0.54))"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3 lg:mb-4",children:[(0,r.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-avenir-bold font-semibold",children:"Listed Properties"}),(0,r.jsx)("div",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-4 lg:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2",children:ef.length}),(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir font-medium tracking-wide opacity-90 mb-2 sm:mb-3 lg:mb-4",children:"Currently available for booking"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 text-xs sm:text-sm font-avenir font-medium tracking-wide",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"}),(0,r.jsxs)("span",{children:["Active: ",ef.length]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white bg-opacity-60 rounded-full"}),(0,r.jsxs)("span",{children:["Ready: ",ef.length]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl sm:rounded-2xl p-3 sm:p-4 lg:p-6 shadow-lg border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3 lg:mb-4",children:[(0,r.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-avenir-bold font-semibold text-booking-dark",children:"Delisted Properties"}),(0,r.jsx)("div",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-4 lg:h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-booking-dark mb-1 sm:mb-2",children:ey.length}),(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir font-medium tracking-wide text-booking-gray mb-2 sm:mb-3 lg:mb-4",children:"Currently unavailable"}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2 sm:mb-3 lg:mb-4",children:(0,r.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"".concat(Math.min(ey.length/10*100,100),"%")}})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-0 text-xs sm:text-sm font-avenir font-medium tracking-wide text-booking-gray",children:[(0,r.jsxs)("span",{children:["This week: ",ey.length]}),(0,r.jsxs)("span",{children:["+",Math.floor(5*Math.random()),"% from last week"]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("h3",{className:"text-base sm:text-lg font-avenir-bold font-semibold text-booking-dark",children:"Property Activity"}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("button",{onClick:()=>M("listed"),className:"px-3 py-1 text-xs sm:text-sm font-avenir font-medium tracking-wide rounded-lg transition-all duration-200 ".concat("listed"===A?"text-booking-teal border-b-2 border-booking-teal bg-booking-bg":"text-booking-gray hover:text-booking-dark"),children:"Listed"}),(0,r.jsx)("button",{onClick:()=>M("delisted"),className:"px-3 py-1 text-xs sm:text-sm font-avenir font-medium tracking-wide rounded-lg transition-all duration-200 ".concat("delisted"===A?"text-booking-teal border-b-2 border-booking-teal bg-booking-bg":"text-booking-gray hover:text-booking-dark"),children:"Delisted"})]})]}),(0,r.jsx)("div",{className:"flex flex-col gap-4",children:(0,r.jsx)("div",{className:"w-full sm:flex-1 sm:max-w-md",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-4",children:[(0,r.jsxs)("div",{className:"relative filter-dropdown-container",children:[(0,r.jsxs)("button",{onClick:()=>D(!O),className:"w-full sm:w-28 md:w-32 lg:w-36 px-2 py-1.5 text-xs border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent bg-white flex items-center justify-between gap-1.5 font-avenir",style:{fontSize:"11px"},children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),(0,r.jsx)("span",{className:"flex-1 text-left",children:1===E.size&&E.has("search")?"Search All":1===E.size&&E.has("postcode")?"Postcode":1===E.size&&E.has("property_type")?"Property Type":"".concat(E.size," Filters")}),(0,r.jsx)("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),O&&(0,r.jsx)("div",{className:"absolute top-full left-0 z-10 w-full sm:w-48 bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:(0,r.jsx)("div",{className:"p-2 space-y-1",children:[{value:"search",label:"Search All"},{value:"postcode",label:"Filter by Postcode"},{value:"property_type",label:"Filter by Property Type"}].map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[(0,r.jsx)("input",{type:"checkbox",checked:E.has(e.value),onChange:t=>{let s=new Set(E);t.target.checked?s.add(e.value):(s.delete(e.value),T(t=>({...t,[e.value]:""}))),W(s)},className:"w-3 h-3 text-booking-teal focus:ring-booking-teal"}),(0,r.jsx)("span",{className:"text-xs font-avenir",style:{fontSize:"11px"},children:e.label})]},e.value))})})]}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[E.has("search")&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search properties...",value:F.search,onChange:e=>T(t=>({...t,search:e.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent font-avenir"}),(0,r.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),E.has("postcode")&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"e.g., SW1A 1AA",value:F.postcode,onChange:e=>T(t=>({...t,postcode:e.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent font-avenir"}),(0,r.jsxs)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})]}),E.has("property_type")&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:F.property_type,onChange:e=>T(t=>({...t,property_type:e.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent font-avenir",children:[(0,r.jsx)("option",{value:"",children:"Select Property Type"}),(0,r.jsx)("option",{value:"Apartment",children:"Apartment"}),(0,r.jsx)("option",{value:"House",children:"House"}),(0,r.jsx)("option",{value:"Studio",children:"Studio"}),(0,r.jsx)("option",{value:"Townhouse",children:"Townhouse"}),(0,r.jsx)("option",{value:"Condo",children:"Condo"}),(0,r.jsx)("option",{value:"Villa",children:"Villa"})]}),(0,r.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]})})}),(0,r.jsx)("div",{className:"space-y-4",children:("listed"===A?ef:ey).length>0?("listed"===A?ef:ey).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 sm:py-3 border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[e.photos&&e.photos.length>0?(0,r.jsx)("img",{src:e.photos[0],alt:e.property_name||"Property photo",className:"w-12 h-12 sm:w-14 sm:h-14 object-cover rounded-lg flex-shrink-0",onError:e=>{e.currentTarget.style.display="none"}}):(0,r.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-avenir font-medium rounded flex-shrink-0",children:e.id}),(0,r.jsx)("h4",{className:"text-sm sm:text-base font-avenir font-bold text-booking-dark truncate",children:e.property_name||"".concat(e.property_type," Property")})]}),(0,r.jsx)("p",{className:"text-xs sm:text-sm font-avenir-regular text-booking-gray truncate",children:eg(e)}),(0,r.jsx)("p",{className:"text-xs sm:text-sm font-avenir-regular text-booking-gray truncate",children:e.property_type})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[(0,r.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-full text-xs font-avenir font-medium ".concat("active"===e.activity?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===e.activity?"Active":"Inactive"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>q(z===e.id?null:e.id),className:"text-booking-gray hover:text-booking-dark p-1",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),z===e.id&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsx)("button",{onClick:()=>{ei(e.id,e.activity||"inactive"),q(null)},className:"block w-full text-left px-4 py-2 text-xs sm:text-base font-avenir text-booking-dark hover:bg-gray-100",style:{fontSize:"9px"},children:"active"===e.activity?"Delist":"List"}),(0,r.jsx)("button",{onClick:()=>{el(e.id),q(null)},className:"block w-full text-left px-4 py-2 text-xs sm:text-base font-avenir text-red-600 hover:bg-gray-100",style:{fontSize:"9px"},children:"Delete"})]})})]})]})]},e.id)):(0,r.jsxs)("div",{className:"bg-white rounded-xl lg:rounded-2xl p-8 lg:p-12 text-center shadow-lg border border-gray-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 lg:w-16 lg:h-16 bg-booking-bg rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 lg:w-8 lg:h-8 text-booking-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsxs)("h3",{className:"text-base lg:text-lg font-avenir font-semibold text-booking-dark mb-2",children:["No ","listed"===A?"Listed":"Delisted"," Properties"]}),(0,r.jsxs)("p",{className:"text-sm lg:text-base font-avenir font-medium tracking-wide text-booking-gray",children:["You don't have any ","listed"===A?"listed":"delisted"," properties at the moment."]})]})})]})]});case"add-property":return(0,r.jsxs)("div",{className:"space-y-4 lg:space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl lg:text-2xl font-semibold text-booking-dark mb-2 font-sans",children:"Add New Property"}),(0,r.jsx)("p",{className:"text-sm lg:text-base text-booking-gray font-sans",children:"Create a new property listing"})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl lg:rounded-2xl p-6 lg:p-8 shadow-lg border border-gray-100",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 lg:w-16 lg:h-16 bg-booking-bg rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 lg:w-8 lg:h-8 text-booking-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,r.jsx)("h3",{className:"text-base lg:text-lg font-semibold text-booking-dark mb-2 font-sans",children:"Create Property Listing"}),(0,r.jsx)("p",{className:"text-sm lg:text-base text-booking-gray mb-6 font-sans",children:"Add a new property to start receiving bookings."}),(0,r.jsx)("button",{onClick:()=>j(!0),className:"bg-booking-teal text-white px-6 lg:px-8 py-2.5 lg:py-3 rounded-lg lg:rounded-xl hover:bg-opacity-90 transition-all duration-200 font-medium text-sm lg:text-base font-sans",children:"Add New Property"})]})})]});case"my-properties":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-avenir-bold font-bold text-booking-dark",children:"All My Properties"}),(0,r.jsx)("p",{className:"text-sm sm:text-base font-avenir font-medium tracking-wide text-booking-gray",children:"Manage all your property listings"})]}),d.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-6",children:d.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300 cursor-pointer",onClick:()=>em(e),children:[(0,r.jsxs)("div",{className:"relative h-24 sm:h-48 w-11/12 sm:w-full p-1 sm:p-3 mx-auto sm:mx-0 mt-2 sm:mt-0",children:[e.photos&&e.photos.length>0?(0,r.jsx)("img",{src:e.photos[0],alt:e.property_name||"Property photo",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}):null,(0,r.jsx)("div",{className:"absolute inset-1 sm:inset-3 bg-gray-100 flex items-center justify-center ".concat(e.photos&&e.photos.length>0?"hidden":"flex"),children:(0,r.jsx)("svg",{className:"w-8 h-8 sm:w-12 sm:h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("div",{className:"absolute top-1 right-1 sm:top-6 sm:right-6",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-[10px] lg:text-lg font-avenir font-medium ".concat("active"===e.activity?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===e.activity?"Active":"Inactive"})})]}),(0,r.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2 sm:mb-2",children:[(0,r.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-[10px] sm:text-xs font-avenir font-medium rounded flex-shrink-0",children:e.id}),(0,r.jsx)("h3",{className:"text-sm sm:text-xl lg:text-lg font-avenir-bold font-bold text-booking-dark line-clamp-1",children:e.property_name})]}),(0,r.jsx)("p",{className:"text-xs sm:text-base lg:text-sm font-avenir-regular text-booking-gray mb-2 sm:mb-3 line-clamp-2",children:eg(e)}),(0,r.jsx)("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:(0,r.jsx)("span",{className:"text-xs sm:text-base lg:text-sm font-avenir-regular text-booking-gray capitalize",children:e.property_type})}),(0,r.jsxs)("div",{className:"flex items-center justify-between space-x-1 sm:space-x-4 mb-2",children:[(0,r.jsxs)("div",{className:"text-center flex-1",children:[(0,r.jsx)("div",{className:"text-sm sm:text-lg lg:text-xl font-avenir-bold font-bold text-booking-dark",children:e.beds||0}),(0,r.jsx)("div",{className:"text-[10px] sm:text-sm lg:text-xs font-avenir-regular text-booking-gray",children:"Beds"})]}),(0,r.jsxs)("div",{className:"text-center flex-1",children:[(0,r.jsx)("div",{className:"text-sm sm:text-lg lg:text-xl font-avenir-bold font-bold text-booking-dark",children:e.bedrooms||0}),(0,r.jsx)("div",{className:"text-[10px] sm:text-sm lg:text-xs font-avenir-regular text-booking-gray",children:"Bedrooms"})]}),(0,r.jsxs)("div",{className:"text-center flex-1",children:[(0,r.jsx)("div",{className:"text-sm sm:text-lg lg:text-xl font-avenir-bold font-bold text-booking-dark",children:e.bathrooms||0}),(0,r.jsx)("div",{className:"text-[10px] sm:text-sm lg:text-xs font-avenir-regular text-booking-gray",children:"Bathrooms"})]})]})]})]},e.id))}):(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100",children:(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-booking-bg rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-booking-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-booking-dark mb-2",children:"No Properties"}),(0,r.jsx)("p",{className:"text-booking-gray",children:"You haven't added any properties yet."})]})})]});case"contact-info":return(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-avenir-bold font-bold text-booking-dark",children:"Contact Information"}),(0,r.jsx)("p",{className:"text-sm sm:text-base font-avenir font-medium tracking-wide text-booking-gray",children:"Manage your contact details and preferences"})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 lg:p-8 shadow-lg border border-gray-100",children:(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",value:Z,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",readOnly:!0})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"email",value:(null==e?void 0:e.email)||"",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",readOnly:!0})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"tel",value:R.phone,onChange:e=>V(t=>({...t,phone:e.target.value})),placeholder:"Enter phone number",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",value:R.company_name,onChange:e=>V(t=>({...t,company_name:e.target.value})),placeholder:"Enter company name",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"email",value:R.company_email,onChange:e=>V(t=>({...t,company_email:e.target.value})),placeholder:"Enter company email",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent"})}),(0,r.jsx)("div",{children:(0,r.jsx)("textarea",{value:R.company_address,onChange:e=>V(t=>({...t,company_address:e.target.value})),placeholder:"Enter company address",rows:3,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent resize-none"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-booking-dark mb-2",children:"Role"}),(0,r.jsx)("input",{type:"text",value:"Partner",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular border border-gray-300 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-booking-teal focus:border-transparent",readOnly:!0})]}),(0,r.jsx)("div",{className:"pt-3 sm:pt-4",children:(0,r.jsx)("button",{onClick:ec,className:"w-full sm:w-auto bg-booking-teal text-white px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-avenir-regular rounded-lg sm:rounded-xl hover:bg-opacity-90 transition-all duration-200 font-medium",children:"Update Information"})}),J&&(0,r.jsx)("div",{className:"mt-4 rounded-xl bg-green-50 border border-green-200 p-3 sm:p-4",children:(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir-regular text-green-800",children:"Information updated successfully"})}),X&&(0,r.jsx)("div",{className:"mt-4 rounded-xl bg-red-50 border border-red-200 p-3 sm:p-4",children:(0,r.jsx)("div",{className:"text-xs sm:text-sm font-avenir-regular text-red-800",children:X})})]})})]});default:return null}})()}),(0,r.jsx)(u,{isOpen:k,onClose:()=>j(!1),onSubmit:eh}),(0,r.jsx)(p,{isOpen:N,onClose:()=>{w(!1),C(null)},property:_,onPropertyUpdate:ea})]})}},7766:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return i},a:function(){return l}});var r=s(7437),o=s(2265),a=s(5526);let n=(0,o.createContext)({user:null,loading:!0,signOut:async()=>{}}),l=()=>{let e=(0,o.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},i=e=>{let{children:t}=e,[s,l]=(0,o.useState)(null),[i,d]=(0,o.useState)(!0),[c,m]=(0,o.useState)(!1),[x,u]=(0,o.useState)(new Set);(0,o.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:t}}=await a.supabase.auth.getSession();e&&((null==t?void 0:t.user)?await p(t.user):l(null),d(!1))}catch(t){console.error("Error getting initial session:",t),e&&(l(null),d(!1))}})();let{data:{subscription:t}}=a.supabase.auth.onAuthStateChange(async(t,r)=>{if(e){if(null==r?void 0:r.user){if(x.has(r.user.id)||c||s&&s.id===r.user.id&&s.role&&("contractor"===s.role||"landlord"===s.role)){d(!1);return}s&&s.id===r.user.id&&s.role||await p(r.user)}else l(null),u(new Set);d(!1)}});return()=>{e=!1,t.unsubscribe()}},[]);let p=async e=>{var t,s,r;if(x.has(e.id)){m(!1),d(!1);return}if(!c){if(e&&e.id&&e.email&&e.role&&"authenticated"!==e.role&&"unauthenticated"!==e.role){l({...e,full_name:(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"User",role:e.role}),m(!1),d(!1);return}if(e&&e.id&&e.role&&("contractor"===e.role||"landlord"===e.role)){m(!1),d(!1);return}m(!0),u(t=>new Set(t).add(e.id));try{let t="contractor";e.email&&e.email.includes("landlord")&&(t="landlord");let r={...e,full_name:(null===(s=e.email)||void 0===s?void 0:s.split("@")[0])||"User",role:t,is_active:!0,email_verified:!!e.email_confirmed_at};l(r),m(!1),d(!1);return}catch(t){console.error("Error fetching user profile:",t),l({...e,full_name:(null===(r=e.email)||void 0===r?void 0:r.split("@")[0])||"User",role:"contractor"}),m(!1),d(!1)}finally{m(!1)}}},h=async()=>{await a.supabase.auth.signOut(),l(null),u(new Set)};return(0,r.jsx)(n.Provider,{value:{user:s,loading:i,signOut:h},children:t})}},5526:function(e,t,s){"use strict";s.r(t),s.d(t,{supabase:function(){return r}});let r=(0,s(8439).eI)("https://gtdjjsxtlgzntmuimyai.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0ZGpqc3h0bGd6bnRtdWlteWFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzA3MjEsImV4cCI6MjA3MzU0NjcyMX0.OIU7JU8oxYb6LrRuTbRJGhWtcy6gH7_5JlML23D2sWE")}},function(e){e.O(0,[439,145,626,971,117,744],function(){return e(e.s=146)}),_N_E=e.O()}]);